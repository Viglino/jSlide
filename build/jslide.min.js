var JSlide=function(){this._param={},this.fonts={},this.progressBar=document.getElementById("progress").querySelector("div"),this.setDefault(),this.addListeners(),this.setEditor(),this.addBar(),this.dialog=new Dlog};JSlide.prototype.title="jSlide",JSlide.prototype.size=[1200,900],JSlide.prototype.fontSize=35,JSlide.prototype.footer="| %TITLE% | %PAGE%/%LENGTH%",JSlide.prototype.set=function(t,e){if("string"==typeof t){if(t&&(this._param[t]=e||this[t]||"","format"===t))switch(e){case"16:9":this._param.size=[1600,900];break;case"4:3":this._param.size=[1200,900];break;default:this._param.size=this.size}}else for(i in t)this.set(i,t[i])},JSlide.prototype.get=function(t){switch(t){case"width":return this._param.size[0];case"height":return this._param.size[1];default:return this._param[t]}},JSlide.prototype.getProperties=function(){return this._param},JSlide.prototype.setDefault=function(){["title","size","fontSize","footer"].forEach(function(t){this.set(t)}.bind(this))},JSlide.prototype.drawSlide=function(t,e,i){var s=this.slide[e],n=s.search("]"),a=s.substr(0,n).trim().split("\n"),l=s.substr(n+1),r={TITLE:this.title,PAGE:e+1,LENGTH:this.slide.length};/:/.test(a[0])||(a[0]="className:"+a[0]);var o={className:""};a.forEach(function(t){var e=t.split(":");o[e.shift().trim()]=e.join(":").trim()});var d=t;t.className=(i?"slideshow "+(o.transition||""):"").trim(),(d=document.createElement("DIV")).className="content";var h=document.createElement("DIV");h.className=("slide "+o.className).trim(),h.innerHTML='<div class="md">'+md2html(l,r)+"</div>",h.querySelectorAll(".step").forEach(function(t){var e=t.getAttribute("data-anim");e&&((e=e.split(","))[0]&&!/:/.test(e[0])&&(t.className="step "+e.shift().trim()),e.forEach(function(e){switch((e=e.split(":"))[0]=e[0].trim(),e[0]){case"step":case"delay":t.setAttribute("data-"+e[0],e[1].trim())}}))});var c=t.querySelectorAll(".content");if(c.forEach(function(t){t.className=t.className+" hidden"}),setTimeout(function(){c.forEach(function(t){t.remove()})},500),setTimeout(function(){d.className=d.className+" visible"},100),t.appendChild(d),d.appendChild(h),this.updateSize(),o.bgImage){var p,m=/\bfullscreen\b/.test(h.className)?d:h;if(/^linear-gradient|^radial-gradient/.test(o.bgImage))(p=document.createElement("DIV")).className="bgImage",p.style.backgroundImage=o.bgImage;else{(p=document.createElement("IMG")).className="bgImage",p.src=o.bgImage;var g=function(){var t=m.getBoundingClientRect();t.width/p.width>t.height/p.height?p.style.width="100%":p.style.height="100%"}.bind(this);p.width?g():p.onload=g}m.insertBefore(p,m.lastChild)}o.color&&(h.className+=" resetColor",h.style.color=o.color),o.fontSize&&(h.querySelector(".md").style.fontSize=o.fontSize+"px"),this.setSlideFont(h,o.fontFamily),window.twttr&&twttr.widgets.load(h);var u=document.createElement("DIV");u.className="footer";var f=this.get("footer").split("|");u.innerHTML='<div class="left">'+md2html(f[0]||"",r)+'</div><div class="middle">'+md2html(f[1]||"",r)+'</div><div class="right">'+md2html(f[2]||"",r)+"</div>",h.appendChild(u)},JSlide.prototype.setSlideFont=function(t,e){e&&(t.style.fontFamily=e,this.loadFont(e))},JSlide.prototype.showPanel=function(t){if(t){var e=document.querySelectorAll("#panel > li > div");this.drawSlide(e[t],t)}else{var i=document.getElementById("panel");i.innerHTML="",this.slide.forEach(function(t,e){var s=document.createElement("LI"),n=document.createElement("DIV");i.appendChild(s),s.appendChild(n),this.drawSlide(n,e),s.addEventListener("click",function(){this.show(e)}.bind(this))}.bind(this))}},JSlide.prototype.show=function(t){if(this.slide&&this.slide.length){var e=document.getElementById("slide");if(void 0!==t&&(this.current=t),this.current=Math.max(0,Math.min(this.current,this.slide.length-1)),history.replaceState?history.replaceState(null,null,"#"+(this.current+1)):location.hash="#"+(this.current+1),this.drawSlide(e,this.current,this.slideshow),document.querySelectorAll("#panel > li").forEach(function(t,e){if(e===this.current){t.className="selected";var i=t.getBoundingClientRect(),s=document.getElementById("panel");s.scrollTop=t.offsetTop+i.height/2-s.getBoundingClientRect().height/2}else t.className=""}.bind(this)),this.editor.setText("[===="+this.slide[this.current]),this.progressBar.style.width=(100*this.current/(this.slide.length-1)||0)+"%",this.presentation)this.drawSlide(this.presentation,this.current,this.slideshow),this.presentation.ownerDocument.getElementById("progress").querySelector("div").style.width=(100*this.current/(this.slide.length-1)||0)+"%"}},JSlide.prototype.nextStep=function(t){var e=[];if(t.querySelectorAll(".step").forEach(function(t){/visible/.test(t.className)||e.push(t)}),e.length){function i(t){setTimeout(function(){t.className=t.className+" visible"},parseInt(100*t.getAttribute("data-delay")))}(e=e.sort(function(t,e){return parseInt(t.getAttribute("data-step")||0)-parseInt(e.getAttribute("data-step")||0)}))[0].className=e[0].className+" visible";for(var s=1;s<e.length&&e[s].getAttribute("data-delay");s++)i(e[s]);return!0}return!1},JSlide.prototype.prevStep=function(t){var e=[];return t.querySelectorAll(".step").forEach(function(t){/visible/.test(t.className)&&e.push(t)}),!!e.length&&((e=e.sort(function(t,e){return parseInt(t.getAttribute("data-step")||0)-parseInt(e.getAttribute("data-step")||0)}))[e.length-1].className=e[e.length-1].className.replace("visible","").trim(),!0)},JSlide.prototype.next=function(){this.slideshow&&this.nextStep(document.getElementById("slide"))?this.presentation&&this.nextStep(this.presentation):this.current<this.slide.length-1&&this.show(++this.current)},JSlide.prototype.prev=function(){this.slideshow&&this.prevStep(document.getElementById("slide"))?this.presentation&&this.prevStep(this.presentation):this.current&&this.show(--this.current)},JSlide.prototype.updateSize=function(){var t=function(t){var e=t.parentNode.clientHeight,i=t.parentNode.clientWidth;t.style.width=this.get("width")+"px",t.style.height=this.get("height")+"px",t.style.fontSize=this.get("fontSize")+"px",this.setSlideFont(t,this.get("fontFamily"));var s=Math.min(i/this.get("width"),e/this.get("height"));t.style.webkitTransform=t.style.transform="translate(-50%, -50%) scale("+s+")"}.bind(this);document.body.querySelectorAll(".slide").forEach(t),this.presentation&&this.presentation.querySelectorAll(".slide").forEach(t)},JSlide.prototype.onkeydown=function(t){switch(t.keyCode){case 39:case 40:case 34:this.next(),t.preventDefault();break;case 37:case 38:case 33:this.prev(),t.preventDefault();break;case 79:t.ctrlKey&&t.preventDefault();break;case 116:this.openPresentation(),t.preventDefault();break;case 83:t.ctrlKey&&(this.save(),t.preventDefault())}},JSlide.prototype.addListeners=function(){window.addEventListener("resize",this.updateSize.bind(this)),document.addEventListener("keydown",this.onkeydown.bind(this),!1),document.body.addEventListener("drop",this.ondrop.bind(this)),document.body.addEventListener("dragover",function(t){t.preventDefault()}),window.addEventListener("load",this.onload.bind(this))},JSlide.prototype.loadFont=function(t,e){if(!e)return this.loadFont(t,document),void(this.presentation&&this.loadFont(t,this.presentation.ownerDocument));if(!e.getElementById("font-"+t)){var i=e.createElement("link");i.setAttribute("id","font-"+t),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href","https://fonts.googleapis.com/css?family="+t),e.getElementsByTagName("head")[0].appendChild(i)}};var i19n={lang:(navigator.language||navigator.userLanguage).split("-").shift(),en:{}};function _T(t){return(i19n[i19n.lang]||i19n.en)[t]||i19n.en[t]||t}var Dlog=function(){this.element=this.createElement("DIV",document.body),this.element.className="dlog-back",this.dlog=this.createElement("DIV",this.element),this.dlog.className="dlog"};Dlog.prototype.createElement=function(t,e,i){var s=document.createElement(t);return i&&(s.innerHTML=i),e.appendChild(s),s},Dlog.prototype.show=function(t){if(this.element.className="dlog-back visible",t&&(this.dlog.innerHTML="",t.title&&("string"==typeof t.title?this.createElement("H1",this.dlog,t.title):this.dlog.appendChild(t.title)),t.content&&("string"==typeof t.content?this.createElement("DIV",this.dlog,t.content):this.dlog.appendChild(t.content)),t.buttons)){var e=this.createElement("DIV",this.dlog);for(var i in e.className="buttons",t.buttons){var s=this.createElement("BUTTON",e,_T(i));"function"==typeof t.buttons[i]&&s.addEventListener("click",t.buttons[i]),s.addEventListener("click",function(){this.hide()}.bind(this))}}},Dlog.prototype.hide=function(){this.element.className="dlog-back"},i19n.en={ok:"OK",cancel:"Cancel",show_presentation:'\n    <div class="edition">edition</div>\n    <div class="inside">presentation</div>\n    <div class="duplicate">clone view</div>\n  '},i19n.fr={ok:"OK",cancel:"Annuler"},JSlide.prototype.addBar=function(){var t=document.getElementById("header");function e(e,i){var s=document.createElement("BUTTON");return s.className=e,s.addEventListener("click",i),t.appendChild(s),s}e("addSlide",function(){this.slide.splice(this.current+1,0,"]"),this.showPanel(),this.show(this.current+1)}.bind(this)),e("open"),e("save",this.save.bind(this)),e("present",this.openPresentation.bind(this)),e("slideshow",this.showPresentation.bind(this))},JSlide.prototype.showPresentation=function(){this.slideshow=!this.slideshow,this.step=0,this.show()},JSlide.prototype.openPresentation=function(){this.dialog.show({content:_T("show_presentation"),buttons:{cancel:1}})},JSlide.editor=function(t){this.jSlide=t,this.element=document.getElementById("editor").querySelector("textarea"),this.element.addEventListener("keydown",this.onkeydown.bind(this)),this.element.addEventListener("change",this.onchange.bind(this))},JSlide.editor.prototype.getText=function(){return this.element.value},JSlide.editor.prototype.setText=function(t){this.element.value=t},JSlide.editor.prototype.insertChar=function(t){if(this.element.selectionStart||"0"==this.element.selectionStart){var e=this.element.selectionStart,i=this.element.selectionEnd;this.element.value=this.element.value.substring(0,e)+t+this.element.value.substring(i,this.element.value.length),this.element.selectionEnd=this.element.selectionStart=e+1}else this.element.value+=t},JSlide.editor.prototype.onchange=function(t){this.jSlide.slide[this.jSlide.current]=this.getText().replace(/^\[====/,""),this.jSlide.show(),t&&this.jSlide.showPanel(this.jSlide.current)},JSlide.editor.prototype.onkeydown=function(t){if(116!==t.keyCode&&(!t.ctrlKey||t.keyCode<60))switch(t.stopPropagation(),t.keyCode){case 9:this.insertChar("\t"),t.preventDefault();break;case 13:this.insertChar("\n");case 27:this.onchange(!1),t.preventDefault()}},JSlide.prototype.setEditor=function(){this.editor=new JSlide.editor(this)},JSlide.prototype.read=function(t){if(t&&/md$/.test(t.name)){this.filename=t.name;var e=new FileReader;e.onload=function(){var t=e.result;this.open(t)}.bind(this),e.readAsText(t)}},JSlide.prototype.open=function(t){this.slide=t,this.slide=this.slide.replace(/(\r\n)/g,"\n"),this.slide=this.slide.split(/\[====/g);var e=this.slide.shift().split("\n"),i={};e.forEach(function(t){t=t.split(":"),i[t.shift().trim()]=t.join(":").trim()}.bind(this)),this.set(i),this.showPanel(),this.current=0,this.show()},JSlide.prototype.save=function(){var t="";for(var e in this.getProperties())t+=e+": "+this.get(e)+"\n";t+="==== "+this.slide.join("[==== ");var i=new Blob([t],{type:"text/plain;charset=utf-8"});saveAs(i,this.filename||"slide.md")},JSlide.prototype.ondrop=function(t){t.preventDefault(),this.read(t.dataTransfer.files[0])},JSlide.prototype.onload=function(t){var e=document.location.search.replace(/^\?/,"");if(e){e+=".md";var i=parseInt(document.location.hash.replace(/^#/,""))||1;if(e){var s=new XMLHttpRequest;s.open("GET",e,!0),this.filename=e.split("/").pop();var n=this;s.onload=function(t){n.open(this.response),n.show(i-1)},s.onerror=function(){},s.send()}}else this.slide=[" title ]\n# New presentation\n## Subtitle"],this.current=0,this.showPanel(),this.show(this.current+1)};var md2html=function(t,e){var i;for(i in e=e||{})/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/.test(e[i])&&!/%/.test(e[i])&&(e[i]=encodeURI(e[i]).replace(/\'/g,"%27"));for(t="\n"+t+"\n",t=md2html.doIcons(t),t=md2html.doTable(t),t=md2html.doData(t,e),i=0;i<md2html.rules.length;i++)t=t.replace(md2html.rules[i][0],md2html.rules[i][1]);return t=md2html.doBlocks(t),t=md2html.cleanUp(t),t=md2html.floatingImages(t)};md2html.floatingImages=function(t){return t=(t=(t=t.replace(/<div class='right'><img([^\<]*)<\/div>/g,"<img class='floatRight' $1")).replace(/<div class='left'><img([^\<]*)<\/div>/g,"<img class='floatLeft' $1")).replace(/<a ([^\<]*)<br \/><img/g,"<a $1<img")},md2html.doBlocks=function(t){return t=(t=(t=t.replace(/\[--(\(([^\)]*)\))?\n?/g,'<div class="step" data-anim="$2">')).replace(/\--\]\n/g,"</div><br/>")).replace(/\--\]/g,"</div>")},md2html.addRule=function(t,e){md2html.rules.push(t,e)},md2html.doIcons=function(t){return t=t.replace(/:([a-z]*)-([_,a-z,0-9,-]*):(([a-z,0-9,-]*)?( ([a-z,0-9,-]+))?:)?(([#,0-9,a-z,A-Z]*):)?/g,'<i class="fa fa-fw $1-$2 fa-$4 fa-$6" style="color:$8"></i>')},md2html.doData=function(t,e){for(var i in e)e[i]&&(t=t.replace(new RegExp("%"+i+"%","g"),e[i]));return t},md2html.doTable=function(t){for(t=t.replace(/\n\ ?-{3,}\ ?\|/g,"<table></table>|");/<\/table>\|\ ?-{3,}/.test(t);)t=t.replace(/<\/table>\|\ ?-{3,}\ ?/g,"</table>");for(t=t.replace(/(.*)<table>/g,"<table><tr><td>$1</td></tr>");/<td>(.*)\|/.test(t);)t=t.replace(/<td>(.*)\|/g,"<td>$1</td><td>");for(;/<\/table>\n([^\n]*)\|/.test(t);)for(t=t.replace(/<\/table>\n(.*)/g,"<tr><td>$1</td></tr></table>");/<td>(.*)\|/.test(t);)t=t.replace(/<td>(.*)\|/g,"<td>$1</td><td>");return t=(t=t.replace(/<\/table>\n/g,"</table>")).replace(/<td>\t/g,"<td class='center'>")},md2html.cleanUp=function(t){return"\n"===(t=(t=t.replace(/(\<\/h[1-5]\>)\n/g,"$1")).replace(/^\n/,""))&&(t=""),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/data-tweet-limit\=\"\"/g,'data-tweet-limit="1"')).replace(/<div class='right'><a class="twitter-/g,"<div class='floatRight'><a class=\"twitter-")).replace(/<div class='left'><a class="twitter-/g,"<div class='floatLeft'><a class=\"twitter-")).replace(/<div class='right'><blockquote /g,"<div class='floatRight' style=\"min-width:200px\"><blockquote ")).replace(/<div class='left'><blockquote /g,"<div class='floatLeft' style=\"min-width:200px\"><blockquote ")).replace(/URL_PAGE_CARTE/g,encodeURIComponent(window.location.href))).replace(/mdBlockTitle\">\n/g,'mdBlockTitle">')).replace(/mdBlockContent\">\n/g,'mdBlockContent">')).replace(/\n<\/label>/g,"</label>")).replace(/\n<\/div><\/div>/g,"</div></div>")).replace(/<\/div>\n/g,"</div>")).replace(/<\/p>\n/g,"</p>")).replace(/(\<\/h[0-9]>)\n/g,"$1")).replace(/(\<hr \/>)\n/g,"$1")).replace(/^\n/,"")).replace(/^\n/,"")).replace(/\n$/,"")).replace(/\n/g,"<br />")).replace(/\t/g," ")).replace(/\<\/ol><br \/>/g,"</ol>")).replace(/\<\/ul><br \/>/g,"</ul>")},md2html.rules=[[/#?(.*)\n={5}(.*)/g,"<h1>$1</h1>"],[/\n#{6}(.*)/g,"<h6>$1</h6>"],[/\n#{5}(.*)/g,"\n<h5>$1</h5>"],[/\n#{4}(.*)/g,"\n<h4>$1</h4>"],[/\n#{3}(.*)/g,"\n<h3>$1</h3>"],[/\n#{2}(.*)/g,"\n<h2>$1</h2>"],[/\n#{1}(.*)/g,"\n<h1>$1</h1>"],[/<h([1-6])>\t/g,"<h$1 class='center'>"],[/\n\&gt\;(.*)/g,"<blockquote>$1</blockquote>"],[/\<\/blockquote\>\<blockquote\>/g,"\n"],[/\n-{5,}/g,"\n<hr />"],[/\n\* (.*)/g,"\n<ul><li>$1</li></ul>"],[/\n {1,}\*\ ([^\n]*)/g,"<ul2><li>$1</li></ul2>"],[/\n\t\*\ ([^\n]*)/g,"<ul2><li>$1</li></ul2>"],[/<\/ul2><ul2>/g,""],[/<\/ul><ul2>([^\n]*)<\/ul2>\n/g,"<ul>$1</ul></ul>"],[/\n\<ul\>/g,"<ul>"],[/<\/ul><ul>/g,""],[/\n[0-9]+\.(.*)/g,"<ol><li>$1</li></ol>"],[/\<\/ol\>\<ol\>/g,""],[/([^\(])([ |\n]https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*))( ?)/g,"$1<a href='$2' target=\"_blank\">$2</a>"],[/([^\(])\bmailto\b\:(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b)/gi,"$1<a href='mailto:$2'>$2</a>"],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/share ?(\d+)?x?(\d+)?\)/g,'<a href="https://twitter.com/share" data-text="$2" data-hashtags="macarte" data-related="IGNFrance" class="twitter-share-button" data-size="large" data-show-count="true">Tweet</a>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/([^\/)]*)\/timeline ?(\d+)?x?(\d+)?\)/g,'<a class="twitter-timeline" href="https://twitter.com/$3" data-tweet-limit="$4" data-width="$5"><a href="https://twitter.com/$3?cards=false"></a></blockquote>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/([^\/)]*)\/timelines\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<a class="twitter-timeline" href="https://twitter.com/$3/timelines/$4" data-tweet-limit="$5" data-width="$6"><a href="https://twitter.com/$3?cards=false"></a></blockquote>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/([^\/)]*)\/timegrid\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<a class="twitter-grid" href="https://twitter.com/$3/timelines/$4" data-limit="$5"  data-width="$6"><a href="https://twitter.com/$3?cards=false"></a></blockquote>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<blockquote class="twitter-tweet" data-cards="$4hidden" data-dnt="true" data-width="$5" width="$5"><a href="https://twitter.com/$3?cards=false"></a></blockquote>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/www.facebook.com\/like ?(\d+)?x?(\d+)?\)/g,'<iframe src="https://www.facebook.com/plugins/like.php?href=URL_PAGE_CARTE&width=136&layout=button_count&action=like&size=small&show_faces=false&share=true&height=20&appId" width="136" height="20" class="facebook-share-button" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/www.facebook.com\/([^\/)]*)\/posts\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2F$3%2Fposts%2F$4&width=$5&height=$6" width="$5" height="$6" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/www.facebook.com\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2F$3&tabs=timeline&width=$4" width="$4" height="$5" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/player.ina.fr\/player\/embed\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" width="300" height="180" frameborder="0" marginheight="0" marginwidth="0" scrolling="no" style="overflow:hidden;width:$4px; height:$5px;" src="https://player.ina.fr/player/embed/$3/wide/0" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(InaEdu([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" width="300" height="180" style="width:$4px; height:$5px;" src="https://fresques.ina.fr/jalons/export/player/InaEdu$3/360x270" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https?:\/\/youtu.be\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" width="300" height="180" style="width:$4px; height:$5px;" src="https://www.youtube.com/embed/$3" frameborder="0" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https?:\/\/dai.ly\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" frameborder="0" width="300" height="180" style="width:$4px; height:$5px;" src="https://www.dailymotion.com/embed/video/$3" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https?:\/\/vimeo.com\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" frameborder="0" width="300" height="180" style="width:$4px; height:$5px;" src="https://player.vimeo.com/video/$3" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=\(\)]*)\.mp3) ?(\d+)?x?(\d+)?\)/g,'<audio controls style="width:$6px; height:$7px;" title="$2"><source src="$3" type="audio/mpeg">Your browser does not support the audio element.</audio>'],[/\!(\[([^\[|\]]+)?\])?\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=\(\)]*)\.mp4) ?(\d+)?x?(\d+)?\)/g,'<video controls style="width:$6px; height:$7px;" title="$2"><source src="$3" type="video/mp4">Your browser does not support the video tag.</video>'],[/\!(\[([^\[|\]]+)?\])?\((.*\.(jpe?g|png|gif|svg)) ?(\d+)?x?(\d+)?\)/g,'<img style="width:$5px; height:$6px;" src="$3" title="$2" />'],[/!(\[([^[|\]]+)?\])?\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=()]*)) ?(\d+)?x?(\d+)?\)/g,'<img style="width:$6px; height:$7px;" src="$3" title="$2" />'],[/!(\[([^[|\]]+)?\])?\((file:\/\/\/([-a-zA-Z0-9@:%_+.~#?&\/\/=()]*)) ?(\d+)?x?(\d+)?\)/g,'<img style="width:$5px; height:$6px;" src="$3" title="$2" />'],[/\[([^[]+)?\]\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*))( ?)([^)]*)\)/g,'<a href=\'$2\' title="$6" target="_blank">$1</a>'],[/\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*))( ?)([^)]*)\)/g,'<a href=\'$1\' title="$5" target="_blank">$1</a>'],[/\[([^[]+)?\]\(\bmailto\b:(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b)\)/gi,"<a href='mailto:$2'>$1</a>"],[/\(\bmailto\b:(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b)\)/gi,"<a href='mailto:$1'>$1</a>"],[/\[([^[]+)?\]\(tel:([0-9+-]+)\)/g,"<a href='tel:$2'>$1</a>"],[/\(tel:([0-9+-]+)\)/g,"<a href='tel:$1'>$1</a>"],[/`(.*?)`/g,"<code>$1</code>"],[/\n {4,}(.*)/g,"<pre>$1</pre>"],[/\n\t(.*)/g,"<pre>$1</pre>"],[/<\/pre><pre>/g,"<br/>"],[/<\/pre>\n/g,"</pre>"],[/(\\\*)/g,"&#42;"],[/(\*\*)([^]*?)\1/g,"<strong>$2</strong>"],[/(\*)([^]*?)\1/g,"<em>$2</em>"],[/<strong><\/strong>/g,"****"],[/<em><\/em>/g,"**"],[/(__)(.*?)\1/g,"<u>$2</u>"],[/(~~)(.*?)\1/g,"<del>$2</del>"],[/\n\|<>([^\n]*)/g,"\n<pc>$1</pc>"],[/\n\|\t([^\n]*)/g,"\n<pc>$1</pc>"],[/\n\|<([^\n]*)/g,"\n<pl>$1</pl>"],[/\n\|>([^\n]*)/g,"\n<pr>$1</pr>"],[/<\/pc>\n<pc>/g,"<br/>"],[/<\/pl>\n<pl>/g,"<br/>"],[/<\/pr>\n<pr>/g,"<br/>"],[/<pc>/g,"<div class='center'>"],[/<pl>/g,"<div class='left'>"],[/<pr>/g,"<div class='right'>"],[/<\/pc>|<\/pl>|<\/pr>/g,"</div>"],[/\(c\)/g,"&copy;"],[/\(r\)/g,"&reg;"],[/\(TM\)/g,"&trade;"]];