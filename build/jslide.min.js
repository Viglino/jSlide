var JSlide=function(){this._param={},this.fonts={},this.progressBar=document.getElementById("progress").querySelector("div"),this.setDefault(),this.addListeners(),this.setEditor(),this.addBar()};JSlide.prototype.title="jSlide",JSlide.prototype.size=[1200,900],JSlide.prototype.fontSize=35,JSlide.prototype.footer="| %TITLE% | %PAGE%/%LENGTH%",JSlide.prototype.set=function(e,t){if("string"==typeof e){if(e&&(this._param[e]=t||this[e]||"","format"===e))switch(t){case"16:9":this._param.size=[1600,900];break;case"4:3":this._param.size=[1200,900];break;default:this._param.size=this.size}}else for(i in e)this.set(i,e[i])},JSlide.prototype.get=function(e){switch(e){case"width":return this._param.size[0];case"height":return this._param.size[1];default:return this._param[e]}},JSlide.prototype.getProperties=function(){return this._param},JSlide.prototype.setDefault=function(){["title","size","fontSize","footer"].forEach(function(e){this.set(e)}.bind(this))},JSlide.prototype.drawSlide=function(e,t,i){var s=this.slide[t],n=s.search("]"),a=s.substr(0,n).trim().split("\n"),r=s.substr(n+1),l={TITLE:this.title,PAGE:t+1,LENGTH:this.slide.length};/:/.test(a[0])||(a[0]="className:"+a[0]);var o={className:""};a.forEach(function(e){var t=e.split(":");o[t.shift().trim()]=t.join(":").trim()});var d=e;e.className=(i?"slideshow "+(o.transition||""):"").trim(),(d=document.createElement("DIV")).className="content";var h=document.createElement("DIV");h.className=("slide "+o.className).trim(),h.innerHTML='<div class="md">'+md2html(r,l)+"</div>",h.querySelectorAll(".step").forEach(function(e){var t=e.getAttribute("data-anim");t&&((t=t.split(","))[0]&&!/:/.test(t[0])&&(e.className="step "+t.shift().trim()),t.forEach(function(t){switch((t=t.split(":"))[0]=t[0].trim(),t[0]){case"step":case"delay":e.setAttribute("data-"+t[0],t[1].trim())}}))});var c=e.querySelectorAll(".content");if(c.forEach(function(e){e.className=e.className+" hidden"}),setTimeout(function(){c.forEach(function(e){e.remove()})},500),setTimeout(function(){d.className=d.className+" visible"},100),e.appendChild(d),d.appendChild(h),this.updateSize(),o.bgImage){var p,m=/\bfullscreen\b/.test(h.className)?d:h;if(/^linear-gradient|^radial-gradient/.test(o.bgImage))(p=document.createElement("DIV")).className="bgImage",p.style.backgroundImage=o.bgImage;else{(p=document.createElement("IMG")).className="bgImage",p.src=o.bgImage;var u=function(){var e=m.getBoundingClientRect();e.width/p.width>e.height/p.height?p.style.width="100%":p.style.height="100%"}.bind(this);p.width?u():p.onload=u}m.insertBefore(p,m.lastChild)}o.color&&(h.className+=" resetColor",h.style.color=o.color),o.fontSize&&(h.querySelector(".md").style.fontSize=o.fontSize+"px"),this.setSlideFont(h,o.fontFamily),window.twttr&&twttr.widgets.load(h);var g=document.createElement("DIV");g.className="footer";var f=this.get("footer").split("|");g.innerHTML='<div class="left">'+md2html(f[0]||"",l)+'</div><div class="middle">'+md2html(f[1]||"",l)+'</div><div class="right">'+md2html(f[2]||"",l)+"</div>",h.appendChild(g)},JSlide.prototype.setSlideFont=function(e,t){t&&(e.style.fontFamily=t,this.loadFont(t))},JSlide.prototype.showPanel=function(e){if(e){var t=document.querySelectorAll("#panel > li > div");this.drawSlide(t[e],e)}else{var i=document.getElementById("panel");i.innerHTML="",this.slide.forEach(function(e,t){var s=document.createElement("LI"),n=document.createElement("DIV");i.appendChild(s),s.appendChild(n),this.drawSlide(n,t),s.addEventListener("click",function(){this.show(t)}.bind(this))}.bind(this))}},JSlide.prototype.show=function(e){if(this.slide&&this.slide.length){var t=document.getElementById("slide");if(void 0!==e&&(this.current=e),this.current=Math.max(0,Math.min(this.current,this.slide.length-1)),history.replaceState?history.replaceState(null,null,"#"+(this.current+1)):location.hash="#"+(this.current+1),this.drawSlide(t,this.current,this.slideshow),document.querySelectorAll("#panel > li").forEach(function(e,t){if(t===this.current){e.className="selected";var i=e.getBoundingClientRect(),s=document.getElementById("panel");s.scrollTop=e.offsetTop+i.height/2-s.getBoundingClientRect().height/2}else e.className=""}.bind(this)),this.editor.setText("[===="+this.slide[this.current]),this.progressBar.style.width=(100*this.current/(this.slide.length-1)||0)+"%",this.presentation)this.drawSlide(this.presentation,this.current,this.slideshow),this.presentation.ownerDocument.getElementById("progress").querySelector("div").style.width=(100*this.current/(this.slide.length-1)||0)+"%"}},JSlide.prototype.nextStep=function(e){var t=[];if(e.querySelectorAll(".step").forEach(function(e){/visible/.test(e.className)||t.push(e)}),t.length){function i(e){setTimeout(function(){e.className=e.className+" visible"},parseInt(100*e.getAttribute("data-delay")))}(t=t.sort(function(e,t){return parseInt(e.getAttribute("data-step")||0)-parseInt(t.getAttribute("data-step")||0)}))[0].className=t[0].className+" visible";for(var s=1;s<t.length&&t[s].getAttribute("data-delay");s++)i(t[s]);return!0}return!1},JSlide.prototype.prevStep=function(e){var t=[];return e.querySelectorAll(".step").forEach(function(e){/visible/.test(e.className)&&t.push(e)}),!!t.length&&((t=t.sort(function(e,t){return parseInt(e.getAttribute("data-step")||0)-parseInt(t.getAttribute("data-step")||0)}))[t.length-1].className=t[t.length-1].className.replace("visible","").trim(),!0)},JSlide.prototype.next=function(){this.slideshow&&this.nextStep(document.getElementById("slide"))?this.presentation&&this.nextStep(this.presentation):this.current<this.slide.length-1&&this.show(++this.current)},JSlide.prototype.prev=function(){this.slideshow&&this.prevStep(document.getElementById("slide"))?this.presentation&&this.prevStep(this.presentation):this.current&&this.show(--this.current)},JSlide.prototype.updateSize=function(){var e=function(e){var t=e.parentNode.clientHeight,i=e.parentNode.clientWidth;e.style.width=this.get("width")+"px",e.style.height=this.get("height")+"px",e.style.fontSize=this.get("fontSize")+"px",this.setSlideFont(e,this.get("fontFamily"));var s=Math.min(i/this.get("width"),t/this.get("height"));e.style.webkitTransform=e.style.transform="translate(-50%, -50%) scale("+s+")"}.bind(this);document.body.querySelectorAll(".slide").forEach(e),this.presentation&&this.presentation.querySelectorAll(".slide").forEach(e)},JSlide.prototype.onkeydown=function(e){switch(e.keyCode){case 39:case 40:case 34:this.next(),e.preventDefault();break;case 37:case 38:case 33:this.prev(),e.preventDefault();break;case 79:e.ctrlKey&&e.preventDefault();break;case 116:this.openPresentation();break;case 83:e.ctrlKey&&(this.save(),e.preventDefault())}},JSlide.prototype.addListeners=function(){window.addEventListener("resize",this.updateSize.bind(this)),document.addEventListener("keydown",this.onkeydown.bind(this),!1),document.body.addEventListener("drop",this.ondrop.bind(this)),document.body.addEventListener("dragover",function(e){e.preventDefault()}),window.addEventListener("load",this.onload.bind(this))},JSlide.prototype.loadFont=function(e,t){if(!t)return this.loadFont(e,document),void(this.presentation&&this.loadFont(e,this.presentation.ownerDocument));if(!t.getElementById("font-"+e)){var i=t.createElement("link");i.setAttribute("id","font-"+e),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href","https://fonts.googleapis.com/css?family="+e),t.getElementsByTagName("head")[0].appendChild(i)}},JSlide.prototype.addBar=function(){var e=document.getElementById("header");function t(t,i){var s=document.createElement("BUTTON");return s.className=t,s.addEventListener("click",i),e.appendChild(s),s}t("addSlide",function(){this.slide.splice(this.current+1,0,"]"),this.showPanel(),this.show(this.current+1)}.bind(this)),t("open"),t("save",this.save.bind(this)),t("present",this.openPresentation.bind(this)),t("slideshow",this.showPresentation.bind(this))},JSlide.prototype.showPresentation=function(){this.slideshow=!this.slideshow,this.step=0,this.show()},JSlide.prototype.openPresentation=function(){var e=window.open("./presentation.html"+(this.presentation?"#":""),"jSlidePresentation","channelmode=0, directories=0, location=0, menubar=0, status=0, titlebar=0, toolbar=0, copyhistory=no");e.document.title=window.document.title;var t=e.document.querySelector("div"),i=function(){this.presentation=e.document.querySelector("div"),e.addEventListener("resize",this.updateSize.bind(this)),e.document.addEventListener("keydown",this.onkeydown.bind(this),!1),e.document.addEventListener("click",function(){this.next()}.bind(this)),e.document.addEventListener("keydown",function(t){116===t.keyCode&&e.document.documentElement.requestFullscreen&&(e.fullScreen?(e.document.exitFullscreen(),e.fullScreen=!1,this.updateSize()):(e.document.documentElement.requestFullscreen(),e.fullScreen=!0,this.updateSize()),t.preventDefault())}.bind(this)),this.show()}.bind(this);!this.presentation&&t&&setTimeout(i,500),e.onload=i,e.onunload=function(){this.presentation=null}.bind(this)},JSlide.editor=function(e){this.jSlide=e,this.element=document.getElementById("editor").querySelector("textarea"),this.element.addEventListener("keydown",this.onkeydown.bind(this)),this.element.addEventListener("change",this.onchange.bind(this))},JSlide.editor.prototype.getText=function(){return this.element.value},JSlide.editor.prototype.setText=function(e){this.element.value=e},JSlide.editor.prototype.insertChar=function(e){if(this.element.selectionStart||"0"==this.element.selectionStart){var t=this.element.selectionStart,i=this.element.selectionEnd;this.element.value=this.element.value.substring(0,t)+e+this.element.value.substring(i,this.element.value.length),this.element.selectionEnd=this.element.selectionStart=t+1}else this.element.value+=e},JSlide.editor.prototype.onchange=function(e){this.jSlide.slide[this.jSlide.current]=this.getText().replace(/^\[====/,""),this.jSlide.show(),e&&this.jSlide.showPanel(this.jSlide.current)},JSlide.editor.prototype.onkeydown=function(e){if(116!==e.keyCode&&(!e.ctrlKey||e.keyCode<60))switch(e.stopPropagation(),e.keyCode){case 9:this.insertChar("\t"),e.preventDefault();break;case 13:this.insertChar("\n");case 27:this.onchange(!1),e.preventDefault()}},JSlide.prototype.setEditor=function(){this.editor=new JSlide.editor(this)},JSlide.prototype.read=function(e){if(e&&/md$/.test(e.name)){this.filename=e.name;var t=new FileReader;t.onload=function(){var e=t.result;this.open(e)}.bind(this),t.readAsText(e)}},JSlide.prototype.open=function(e){this.slide=e,this.slide=this.slide.replace(/(\r\n)/g,"\n"),this.slide=this.slide.split(/\[====/g);var t=this.slide.shift().split("\n"),i={};t.forEach(function(e){e=e.split(":"),i[e.shift().trim()]=e.join(":").trim()}.bind(this)),this.set(i),this.showPanel(),this.current=0,this.show()},JSlide.prototype.save=function(){var e="";for(var t in this.getProperties())e+=t+": "+this.get(t)+"\n";e+="==== "+this.slide.join("[==== ");var i=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(i,this.filename||"slide.md")},JSlide.prototype.ondrop=function(e){e.preventDefault(),this.read(e.dataTransfer.files[0])},JSlide.prototype.onload=function(e){var t=document.location.search.replace(/^\?/,"");if(t){t+=".md";var i=parseInt(document.location.hash.replace(/^#/,""))||1;if(t){var s=new XMLHttpRequest;s.open("GET",t,!0),this.filename=t.split("/").pop();var n=this;s.onload=function(e){n.open(this.response),n.show(i-1)},s.onerror=function(){},s.send()}}else this.slide=[" title ]\n# New presentation\n## Subtitle"],this.current=0,this.showPanel(),this.show(this.current+1)};var md2html=function(e,t){var i;for(i in t=t||{})/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/.test(t[i])&&!/%/.test(t[i])&&(t[i]=encodeURI(t[i]).replace(/\'/g,"%27"));for(e="\n"+e+"\n",e=md2html.doIcons(e),e=md2html.doTable(e),e=md2html.doData(e,t),i=0;i<md2html.rules.length;i++)e=e.replace(md2html.rules[i][0],md2html.rules[i][1]);return e=md2html.doBlocks(e),e=md2html.cleanUp(e),e=md2html.floatingImages(e)};md2html.floatingImages=function(e){return e=(e=(e=e.replace(/<div class='right'><img([^\<]*)<\/div>/g,"<img class='floatRight' $1")).replace(/<div class='left'><img([^\<]*)<\/div>/g,"<img class='floatLeft' $1")).replace(/<a ([^\<]*)<br \/><img/g,"<a $1<img")},md2html.doBlocks=function(e){return e=(e=(e=e.replace(/\[--(\(([^\)]*)\))?\n?/g,'<div class="step" data-anim="$2">')).replace(/\--\]\n/g,"</div><br/>")).replace(/\--\]/g,"</div>")},md2html.addRule=function(e,t){md2html.rules.push(e,t)},md2html.doIcons=function(e){return e=e.replace(/:([a-z]*)-([_,a-z,0-9,-]*):(([a-z,0-9,-]*)?( ([a-z,0-9,-]+))?:)?(([#,0-9,a-z,A-Z]*):)?/g,'<i class="fa fa-fw $1-$2 fa-$4 fa-$6" style="color:$8"></i>')},md2html.doData=function(e,t){for(var i in t)t[i]&&(e=e.replace(new RegExp("%"+i+"%","g"),t[i]));return e},md2html.doTable=function(e){for(e=e.replace(/\n\ ?-{3,}\ ?\|/g,"<table></table>|");/<\/table>\|\ ?-{3,}/.test(e);)e=e.replace(/<\/table>\|\ ?-{3,}\ ?/g,"</table>");for(e=e.replace(/(.*)<table>/g,"<table><tr><td>$1</td></tr>");/<td>(.*)\|/.test(e);)e=e.replace(/<td>(.*)\|/g,"<td>$1</td><td>");for(;/<\/table>\n([^\n]*)\|/.test(e);)for(e=e.replace(/<\/table>\n(.*)/g,"<tr><td>$1</td></tr></table>");/<td>(.*)\|/.test(e);)e=e.replace(/<td>(.*)\|/g,"<td>$1</td><td>");return e=(e=e.replace(/<\/table>\n/g,"</table>")).replace(/<td>\t/g,"<td class='center'>")},md2html.cleanUp=function(e){return"\n"===(e=(e=e.replace(/(\<\/h[1-5]\>)\n/g,"$1")).replace(/^\n/,""))&&(e=""),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/data-tweet-limit\=\"\"/g,'data-tweet-limit="1"')).replace(/<div class='right'><a class="twitter-/g,"<div class='floatRight'><a class=\"twitter-")).replace(/<div class='left'><a class="twitter-/g,"<div class='floatLeft'><a class=\"twitter-")).replace(/<div class='right'><blockquote /g,"<div class='floatRight' style=\"min-width:200px\"><blockquote ")).replace(/<div class='left'><blockquote /g,"<div class='floatLeft' style=\"min-width:200px\"><blockquote ")).replace(/URL_PAGE_CARTE/g,encodeURIComponent(window.location.href))).replace(/mdBlockTitle\">\n/g,'mdBlockTitle">')).replace(/mdBlockContent\">\n/g,'mdBlockContent">')).replace(/\n<\/label>/g,"</label>")).replace(/\n<\/div><\/div>/g,"</div></div>")).replace(/<\/div>\n/g,"</div>")).replace(/<\/p>\n/g,"</p>")).replace(/(\<\/h[0-9]>)\n/g,"$1")).replace(/(\<hr \/>)\n/g,"$1")).replace(/^\n/,"")).replace(/^\n/,"")).replace(/\n$/,"")).replace(/\n/g,"<br />")).replace(/\t/g," ")).replace(/\<\/ol><br \/>/g,"</ol>")).replace(/\<\/ul><br \/>/g,"</ul>")},md2html.rules=[[/#?(.*)\n={5}(.*)/g,"<h1>$1</h1>"],[/\n#{6}(.*)/g,"<h6>$1</h6>"],[/\n#{5}(.*)/g,"\n<h5>$1</h5>"],[/\n#{4}(.*)/g,"\n<h4>$1</h4>"],[/\n#{3}(.*)/g,"\n<h3>$1</h3>"],[/\n#{2}(.*)/g,"\n<h2>$1</h2>"],[/\n#{1}(.*)/g,"\n<h1>$1</h1>"],[/<h([1-6])>\t/g,"<h$1 class='center'>"],[/\n\&gt\;(.*)/g,"<blockquote>$1</blockquote>"],[/\<\/blockquote\>\<blockquote\>/g,"\n"],[/\n-{5,}/g,"\n<hr />"],[/\n\* (.*)/g,"\n<ul><li>$1</li></ul>"],[/\n {1,}\*\ ([^\n]*)/g,"<ul2><li>$1</li></ul2>"],[/\n\t\*\ ([^\n]*)/g,"<ul2><li>$1</li></ul2>"],[/<\/ul2><ul2>/g,""],[/<\/ul><ul2>([^\n]*)<\/ul2>\n/g,"<ul>$1</ul></ul>"],[/\n\<ul\>/g,"<ul>"],[/<\/ul><ul>/g,""],[/\n[0-9]+\.(.*)/g,"<ol><li>$1</li></ol>"],[/\<\/ol\>\<ol\>/g,""],[/([^\(])([ |\n]https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*))( ?)/g,"$1<a href='$2' target=\"_blank\">$2</a>"],[/([^\(])\bmailto\b\:(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b)/gi,"$1<a href='mailto:$2'>$2</a>"],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/share ?(\d+)?x?(\d+)?\)/g,'<a href="https://twitter.com/share" data-text="$2" data-hashtags="macarte" data-related="IGNFrance" class="twitter-share-button" data-size="large" data-show-count="true">Tweet</a>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/([^\/)]*)\/timeline ?(\d+)?x?(\d+)?\)/g,'<a class="twitter-timeline" href="https://twitter.com/$3" data-tweet-limit="$4" data-width="$5"><a href="https://twitter.com/$3?cards=false"></a></blockquote>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/([^\/)]*)\/timelines\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<a class="twitter-timeline" href="https://twitter.com/$3/timelines/$4" data-tweet-limit="$5" data-width="$6"><a href="https://twitter.com/$3?cards=false"></a></blockquote>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/([^\/)]*)\/timegrid\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<a class="twitter-grid" href="https://twitter.com/$3/timelines/$4" data-limit="$5"  data-width="$6"><a href="https://twitter.com/$3?cards=false"></a></blockquote>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/twitter.com\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<blockquote class="twitter-tweet" data-cards="$4hidden" data-dnt="true" data-width="$5" width="$5"><a href="https://twitter.com/$3?cards=false"></a></blockquote>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/www.facebook.com\/like ?(\d+)?x?(\d+)?\)/g,'<iframe src="https://www.facebook.com/plugins/like.php?href=URL_PAGE_CARTE&width=136&layout=button_count&action=like&size=small&show_faces=false&share=true&height=20&appId" width="136" height="20" class="facebook-share-button" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/www.facebook.com\/([^\/)]*)\/posts\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2F$3%2Fposts%2F$4&width=$5&height=$6" width="$5" height="$6" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/www.facebook.com\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2F$3&tabs=timeline&width=$4" width="$4" height="$5" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https:\/\/player.ina.fr\/player\/embed\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" width="300" height="180" frameborder="0" marginheight="0" marginwidth="0" scrolling="no" style="overflow:hidden;width:$4px; height:$5px;" src="https://player.ina.fr/player/embed/$3/wide/0" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(InaEdu([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" width="300" height="180" style="width:$4px; height:$5px;" src="https://fresques.ina.fr/jalons/export/player/InaEdu$3/360x270" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https?:\/\/youtu.be\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" width="300" height="180" style="width:$4px; height:$5px;" src="https://www.youtube.com/embed/$3" frameborder="0" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https?:\/\/dai.ly\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" frameborder="0" width="300" height="180" style="width:$4px; height:$5px;" src="https://www.dailymotion.com/embed/video/$3" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\(https?:\/\/vimeo.com\/([^ |\)]*) ?(\d+)?x?(\d+)?\)/g,'<iframe class="video" frameborder="0" width="300" height="180" style="width:$4px; height:$5px;" src="https://player.vimeo.com/video/$3" allowfullscreen></iframe>'],[/\!(\[([^\[|\]]+)?\])?\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=\(\)]*)\.mp3) ?(\d+)?x?(\d+)?\)/g,'<audio controls style="width:$6px; height:$7px;" title="$2"><source src="$3" type="audio/mpeg">Your browser does not support the audio element.</audio>'],[/\!(\[([^\[|\]]+)?\])?\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=\(\)]*)\.mp4) ?(\d+)?x?(\d+)?\)/g,'<video controls style="width:$6px; height:$7px;" title="$2"><source src="$3" type="video/mp4">Your browser does not support the video tag.</video>'],[/\!(\[([^\[|\]]+)?\])?\((\.\/)([^\.]*\.(jpe?g|png|gif|svg)) ?(\d+)?x?(\d+)?\)/g,'<img style="width:$6px; height:$7px;" src="$3$4" title="$2" />'],[/!(\[([^[|\]]+)?\])?\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=()]*)) ?(\d+)?x?(\d+)?\)/g,'<img style="width:$6px; height:$7px;" src="$3" title="$2" />'],[/!(\[([^[|\]]+)?\])?\((file:\/\/\/([-a-zA-Z0-9@:%_+.~#?&\/\/=()]*)) ?(\d+)?x?(\d+)?\)/g,'<img style="width:$5px; height:$6px;" src="$3" title="$2" />'],[/\[([^[]+)?\]\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*))( ?)([^)]*)\)/g,'<a href=\'$2\' title="$6" target="_blank">$1</a>'],[/\((https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*))( ?)([^)]*)\)/g,'<a href=\'$1\' title="$5" target="_blank">$1</a>'],[/\[([^[]+)?\]\(\bmailto\b:(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b)\)/gi,"<a href='mailto:$2'>$1</a>"],[/\(\bmailto\b:(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b)\)/gi,"<a href='mailto:$1'>$1</a>"],[/\[([^[]+)?\]\(tel:([0-9+-]+)\)/g,"<a href='tel:$2'>$1</a>"],[/\(tel:([0-9+-]+)\)/g,"<a href='tel:$1'>$1</a>"],[/`(.*?)`/g,"<code>$1</code>"],[/\n {4,}(.*)/g,"<pre>$1</pre>"],[/\n\t(.*)/g,"<pre>$1</pre>"],[/<\/pre><pre>/g,"<br/>"],[/<\/pre>\n/g,"</pre>"],[/(\\\*)/g,"&#42;"],[/(\*\*)([^]*?)\1/g,"<strong>$2</strong>"],[/(\*)([^]*?)\1/g,"<em>$2</em>"],[/<strong><\/strong>/g,"****"],[/<em><\/em>/g,"**"],[/(__)(.*?)\1/g,"<u>$2</u>"],[/(~~)(.*?)\1/g,"<del>$2</del>"],[/\n\|<>([^\n]*)/g,"\n<pc>$1</pc>"],[/\n\|\t([^\n]*)/g,"\n<pc>$1</pc>"],[/\n\|<([^\n]*)/g,"\n<pl>$1</pl>"],[/\n\|>([^\n]*)/g,"\n<pr>$1</pr>"],[/<\/pc>\n<pc>/g,"<br/>"],[/<\/pl>\n<pl>/g,"<br/>"],[/<\/pr>\n<pr>/g,"<br/>"],[/<pc>/g,"<div class='center'>"],[/<pl>/g,"<div class='left'>"],[/<pr>/g,"<div class='right'>"],[/<\/pc>|<\/pl>|<\/pr>/g,"</div>"],[/\(c\)/g,"&copy;"],[/\(r\)/g,"&reg;"],[/\(TM\)/g,"&trade;"]];