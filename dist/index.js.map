{"version":3,"sources":["src/style/load.js","src/i19n/i19n.js","src/dialog/dlog.js","src/jslide/jSlide.js","src/jslide/jSlide.font.js","src/md/md2html.js","src/jslide/jSlide.draw.js","../src/FileSaver.js","src/jslide/jSlide.io.js","src/jslide/jSlide.event.js","src/jslide/jSlide.panel.js","src/jslide/jSlide.editor.js","src/jslide/jSlide.presentation.js","src/jslide/jSlide.module.js","src/bar/bar.js","index.js"],"names":["addCSS","filename","style","document","createElement","href","type","rel","getElementsByTagName","append","i19n","ie19n","window","lang","navigator","language","userLanguage","split","shift","en","addScript","src","s","setAttribute","body","appendChild","_T","k","Dlog","element","className","dlog","prototype","el","parent","html","d","innerHTML","show","options","title","content","buttons","bar","b","but","addEventListener","hide","bind","jSlide","_param","fonts","size","fontSize","footer","v","_default","i","set","forEach","p","dialog","slide","id","progress","progressBar","loadFont","font","doc","presentation","ownerDocument","getElementById","fileref","setSlideFont","div","fontFamily","md2html","md","data","test","encodeURI","replace","doIcons","doTable","doData","rules","length","doBlocks","cleanUp","floatingImages","addRule","rex","rep","push","RegExp","encodeURIComponent","location","drawSlide","page","slideshow","pos","search","head","substr","trim","TITLE","get","PAGE","LENGTH","param","h","join","transition","querySelectorAll","e","prop","getAttribute","old","node","setTimeout","remove","updateSize","bgImage","img","backgroundImage","setSize","r","getBoundingClientRect","width","height","onload","insertBefore","lastChild","color","querySelector","twttr","widgets","load","c","n","undefined","current","Math","max","min","history","replaceState","hash","l","ul","scrollTop","offsetTop","editor","setText","nextStep","elt","step","delayShow","parseInt","sort","a","prevStep","next","prev","read","file","name","reader","FileReader","res","result","open","readAsText","properties","showPanel","save","getProperties","blob","Blob","ondrop","ev","console","log","preventDefault","dataTransfer","files","ajax","XMLHttpRequest","pop","self","response","onerror","send","resize","parentNode","clientHeight","clientWidth","sc","webkitTransform","transform","onkeydown","keyCode","ctrlKey","openPresentation","timer","touchstart","touchend","touches","clientX","clientY","Date","clearTimeout","abs","openPresentationDlog","panel","li","editorDiv","onchange","getText","value","insertChar","selectionStart","startPos","endPos","selectionEnd","substring","stopPropagation","w","links","slideDiv","ontouchstart","ontouchmove","ontouchend","documentElement","requestFullscreen","fullScreen","exitFullscreen","onunload","showPresentation","cancel","header","addButton","click","splice"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["// Default style\r\nimport './style.css'\r\n\r\nimport './style.title.css'\r\nimport './style.chapter.css'\r\nimport './style.list.css'\r\nimport './style.transition.css'\r\n\r\n// Load assets\r\nfunction addCSS(filename){\r\n  const style = document.createElement('link');\r\n  style.href = filename;\r\n  style.type = 'text/css';\r\n  style.rel = 'stylesheet';\r\n  document.getElementsByTagName('head')[0].append(style);\r\n}\r\n\r\naddCSS('fonts/font-awesome.css');\r\naddCSS('fonts/HackRegular.css');\r\naddCSS('fonts/OpenSans.css');","/*\r\n * Copyright (c) 2019 Jean-Marc VIGLINO (https://github.com/Viglino),\r\n * released under the MIT license (French BSD license)\r\n */\r\n/** Define a global function to translate\r\n * \r\n * @author Jean-Marc VIGLINO (https://github.com/Viglino)\r\n */\r\n// Global i19n\r\nconst ie19n = window.i19n = {\r\n  lang: (navigator.language || navigator.userLanguage).split('-').shift(),\r\n  en: {}\r\n};\r\n\r\n// Global function\r\nwindow._T = function(k) {\r\n  return (i19n[i19n.lang] || i19n.en)[k] || i19n.en[k] || k;\r\n};\r\n\r\n// Load languages\r\nfunction addScript( src ) {\r\n  const s = document.createElement( 'script' );\r\n  s.setAttribute( 'src', src );\r\n  document.body.appendChild( s );\r\n}\r\naddScript('./i19n/i19n.en.js');\r\naddScript('./i19n/i19n.'+i19n.lang+'.js');\r\n\r\nexport default i19n","import './dlog.css'\r\nimport '../i19n/i19n'\r\n\r\n/** Application dialog\r\n * @class\r\n */\r\nconst Dlog = function() {\r\n  this.element = this.createElement('DIV', document.body);\r\n  this.element.className = 'dlog-back';\r\n  this.dlog = this.createElement('DIV', this.element);\r\n  this.dlog.className = 'dlog';\r\n};\r\n\r\n/** Create an element\r\n */\r\nDlog.prototype.createElement = function(el, parent, html){\r\n  var d = document.createElement(el);\r\n  if (html) d.innerHTML = html;\r\n  parent.appendChild(d);\r\n  return d;\r\n};\r\n\r\n/** Show a dialog\r\n * @param {*} options\r\n *  @param {string|Element} options.title\r\n *  @param {string|Element} options.content\r\n *  @param {*} options.buttons a list of buttons\r\n */\r\nDlog.prototype.show = function(options) {\r\n  this.element.className = 'dlog-back visible';\r\n  if (options) {\r\n    this.dlog.innerHTML = '';\r\n    if (options.title) {\r\n      if (typeof options.title === 'string') {\r\n        this.createElement('H1', this.dlog, options.title)\r\n      } else {\r\n        this.dlog.appendChild(options.title);\r\n      }\r\n    }\r\n    if (options.content) {\r\n      if (typeof options.content === 'string') {\r\n        this.createElement('DIV', this.dlog, options.content)\r\n      } else {\r\n        this.dlog.appendChild(options.content);\r\n      }\r\n    }\r\n    if (options.buttons) {\r\n      var bar = this.createElement('DIV', this.dlog);\r\n      bar.className = 'buttons';\r\n      for (var b in options.buttons) {\r\n        var but = this.createElement('BUTTON', bar, _T(b));\r\n        if (typeof options.buttons[b] === 'function') but.addEventListener('click', options.buttons[b]);\r\n        but.addEventListener('click', function(){ this.hide() }.bind(this));\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\n/** Hide the dialog\r\n */\r\nDlog.prototype.hide = function() {\r\n  this.element.className = 'dlog-back';\r\n};\r\n\r\nexport default Dlog;","/**\r\n * jSlide\r\n */\r\nconst jSlide = {\r\n  _param: {},\r\n  fonts: {}\r\n};\r\n\r\n/** Default values  */\r\njSlide._default = {\r\n  title: 'jSlide',\r\n  size: [1200,900],\r\n  fontSize: 35,\r\n  footer: '| %TITLE% | %PAGE%/%LENGTH%'\r\n}\r\n\r\n/** Set property\r\n * @param {string|Object} k key value or a key value object\r\n * @param {string} v value\r\n */\r\njSlide.set = function(k,v) {\r\n  if (typeof k === 'string') {\r\n    if (k) {\r\n      jSlide._param[k] = v || jSlide._default[k] || '';\r\n      if (k==='format') {\r\n        switch (v) {\r\n          case '16:9': jSlide._param.size = [1600,900]; break;\r\n          case '4:3': jSlide._param.size = [1200,900]; break;\r\n          default: jSlide._param.size = jSlide.size;\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    for (let i in k) jSlide.set(i, k[i]);\r\n  }\r\n};\r\n\r\n/** Get propertie\r\n * @param {string} k key\r\n * @return {string} value\r\n */\r\njSlide.get = function(k) {\r\n  switch(k) {\r\n    case 'width': return jSlide._param.size[0];\r\n    case 'height': return jSlide._param.size[1];\r\n    default: return jSlide._param[k];\r\n  }\r\n};\r\n\r\n/** Get properties as an object\r\n * @return {object}\r\n */\r\njSlide.getProperties = function() {\r\n  return jSlide._param;\r\n};\r\n\r\n/** Set default properties */\r\n['title', 'size', 'fontSize', 'footer'].forEach((p) => {\r\n  jSlide.set(p);  \r\n});\r\n\r\n\r\n// Create dialog\r\nimport Dlog from '../dialog/dlog'\r\njSlide.dialog = new Dlog();\r\n\r\n// Create slide\r\nconst slide = document.createElement('DIV');\r\nslide.id = 'slide';\r\ndocument.body.appendChild(slide);\r\n\r\n// Add progress bar\r\nconst progress = document.createElement('DIV');\r\nprogress.id = 'progress';\r\ndocument.body.appendChild(progress);\r\n\r\njSlide.progressBar = document.createElement('DIV');\r\nprogress.appendChild(jSlide.progressBar);\r\n\r\n// Export slide\r\nexport default jSlide\r\n","import jSlide from './jSlide'\r\n\r\nfunction loadFont(font, doc) {\r\n  if (!doc) {\r\n    loadFont(font, document);\r\n    if (jSlide.presentation) loadFont(font, jSlide.presentation.ownerDocument);\r\n    return;\r\n  } else {\r\n    var elt = doc.getElementById('font-'+font);\r\n    if (!elt) {\r\n      var fileref = doc.createElement(\"link\");\r\n      fileref.setAttribute('id', 'font-'+font);\r\n      fileref.setAttribute('rel', 'stylesheet');\r\n      fileref.setAttribute('type', 'text/css');\r\n      fileref.setAttribute('href', 'https://fonts.googleapis.com/css?family='+font);\r\n      doc.getElementsByTagName('head')[0].appendChild(fileref)\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * \r\n */\r\njSlide.setSlideFont = function (div, font) {\r\n  if (font) {\r\n    div.style.fontFamily = font;\r\n    loadFont(font);\r\n  }\r\n};\r\n","ï»¿/*\r\n*  Copyright (c) 2016 Jean-Marc VIGLINO (https://github.com/Viglino),\r\n*  released under the MIT license (French BSD license)\r\n*/\r\n/*eslint no-useless-escape: \"off\" */\r\n/*eslint no-constant-condition: [\"error\", { \"checkLoops\": false }]*/\r\n\r\nimport './md.css'\r\n\r\n\r\n/** Simple markdown to html convertor\r\n * @param {String} md the markdown text\r\n * @param {} data a list of key value to replace in the markdown %key%\r\n * @return {HTMl} HTML code\r\n */\r\nconst md2html = function (md, data) {\r\n  var i;\r\n  data = data || {};\r\n  // Encoder les URI\r\n  for (i in data) {\r\n    if (/^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/.test(data[i])\r\n      && !/%/.test(data[i])){\r\n      data[i] = encodeURI(data[i]).replace(/\\'/g,\"%27\");\r\n    }\r\n  }\r\n\r\n  // md string\r\n  md = \"\\n\" + md +\"\\n\";\r\n\r\n  // Handle icons\r\n  md = md2html.doIcons(md);\r\n\r\n  // Table management\r\n  md = md2html.doTable(md);\r\n  // Data management\r\n  md = md2html.doData(md, data);\r\n  // RegEpx rules\r\n  for (i=0; i<md2html.rules.length; i++) {\r\n    md = md.replace(md2html.rules[i][0], md2html.rules[i][1]);\r\n  }\r\n  // Handle blocks\r\n  md = md2html.doBlocks(md);\r\n  // Clean up\r\n  md = md2html.cleanUp(md);\r\n//  console.log(md)\r\n\r\n  // Floating images\r\n  md = md2html.floatingImages(md);\r\n  return md;\r\n};\r\n\r\n/** Transform md to simple text\r\n * /\r\nvar md2text = function (md, data) {\r\n    return md2html.doData(md, data);\r\n\r\n    //return $(\"<div>\").html(md2html(md, data)).text();\r\n}\r\n/**/\r\n\r\n/** \r\n * floating images\r\n */\r\nmd2html.floatingImages = function (md) {\r\n  md = md.replace (/<div class='right'><img([^\\<]*)<\\/div>/g,\"<img class='floatRight' $1\");\r\n  md = md.replace (/<div class='left'><img([^\\<]*)<\\/div>/g,\"<img class='floatLeft' $1\");\r\n  md = md.replace (/<a ([^\\<]*)<br \\/><img/g,\"<a $1<img\");\r\n  return md;\r\n};\r\n\r\n/**\r\n * Create animated blocks\r\n */\r\nmd2html.doBlocks = function (md) {\r\n  md = md.replace(/\\[--(\\(([^\\)]*)\\))?\\n?/g, '<div class=\"step\" data-anim=\"$2\">');\r\n  md = md.replace(/\\--\\]\\n/g, '</div><br/>');\r\n  md = md.replace(/\\--\\]/g, '</div>');\r\n  return md;\r\n};\r\n\r\n\r\n/** Add new rule\r\n*  @param {RegExp} rex RegExp to use in replacement\r\n*  @param {string} rep replacement string\r\n*  @return {string} result md\r\n*/\r\nmd2html.addRule = function(rex, rep) {\r\n  md2html.rules.push(rex, rep);\r\n};\r\n\r\n/**\r\n * Create icon font\r\n */\r\nmd2html.doIcons = function(md) {\r\n  md = md.replace(/:([a-z]*)-([_,a-z,0-9,-]*):(([a-z,0-9,-]*)?( ([a-z,0-9,-]+))?:)?(([#,0-9,a-z,A-Z]*):)?/g, '<i class=\"fa fa-fw $1-$2 fa-$4 fa-$6\" style=\"color:$8\"></i>');\r\n  return md;\r\n};\r\n\r\n/** A list of key value to replace as %key% > value in md\r\n*  @param {string} md the markdown\r\n*  @param {Objevt} data list of key/value\r\n*  @return {string} result md\r\n*/\r\nmd2html.doData = function(md, data) {\r\n  for (var i in data) if (data[i]) {\r\n    md = md.replace(new RegExp(\"%\"+i+\"%\",'g'), data[i]);\r\n  }\r\n  return md;\r\n};\r\n\r\n/** Table handler\r\n*  @param {string} md the markdown\r\n*  @return {string} result md\r\n*/\r\nmd2html.doTable = function(md) {\r\n  // Detect ---- | ----\r\n  md = md.replace(/\\n\\ ?-{3,}\\ ?\\|/g, '<table></table>|');\r\n  while (/<\\/table>\\|\\ ?-{3,}/.test(md)) {\r\n    md = md.replace(/<\\/table>\\|\\ ?-{3,}\\ ?/g, '</table>');\r\n  }\r\n  // Header\r\n  md = md.replace(/(.*)<table>/g, '<table><tr><td>$1</td></tr>');\r\n  while (/<td>(.*)\\|/.test(md)) {\r\n    md = md.replace(/<td>(.*)\\|/g, '<td>$1</td><td>');\r\n  }\r\n  // Lines\r\n  while (/<\\/table>\\n([^\\n]*)\\|/.test(md)) {\r\n    md = md.replace(/<\\/table>\\n(.*)/g, '<tr><td>$1</td></tr></table>');\r\n    while (/<td>(.*)\\|/.test(md)) {\r\n      md = md.replace(/<td>(.*)\\|/g, '<td>$1</td><td>');\r\n    }\r\n  }\r\n  md = md.replace(/<\\/table>\\n/g,\"</table>\");\r\n  md = md.replace(/<td>\\t/g,\"<td class='center'>\");\r\n  return md;\r\n};\r\n\r\n/** Clean endl\r\n*  @param {string} md the markdown\r\n*  @return {string} result md\r\n*/\r\nmd2html.cleanUp = function(md) {  \r\n  md = md.replace(/(\\<\\/h[1-5]\\>)\\n/g, \"$1\");\r\n  md = md.replace(/^\\n/, '');\r\n  if (md==='\\n') md = '';\r\n\r\n  // Remove timeline tweet\r\n  md = md.replace(/data-tweet-limit\\=\\\"\\\"/g,'data-tweet-limit=\"1\"');\r\n  md = md.replace (/<div class='right'><a class=\"twitter-/g,\"<div class='floatRight'><a class=\\\"twitter-\")\r\n  md = md.replace (/<div class='left'><a class=\"twitter-/g,\"<div class='floatLeft'><a class=\\\"twitter-\")\r\n  md = md.replace (/<div class='right'><blockquote /g,\"<div class='floatRight' style=\\\"min-width:200px\\\"><blockquote \")\r\n  md = md.replace (/<div class='left'><blockquote /g,\"<div class='floatLeft' style=\\\"min-width:200px\\\"><blockquote \")\r\n  // Facebook\r\n  md = md.replace (/URL_PAGE_CARTE/g, encodeURIComponent(window.location.href));\r\n  \r\n  // Collapsible blocks\r\n  md = md.replace(/mdBlockTitle\\\">\\n/g,'mdBlockTitle\">');\r\n  md = md.replace(/mdBlockContent\\\">\\n/g,'mdBlockContent\">');\r\n  md = md.replace(/\\n<\\/label>/g,'</label>');\r\n  md = md.replace(/\\n<\\/div><\\/div>/g,'</div><\\/div>');\r\n  md = md.replace(/<\\/div>\\n/g,'</div>');\r\n\r\n//  md = md.replace(/<\\/ul>\\n{1,2}/g, '</ul>');\r\n//  md = md.replace(/\\<\\/ol\\>\\n{1,2}/g, '</ol>');\r\n\r\n  md = md.replace(/<\\/p>\\n/g, '</p>');\r\n\r\n  md = md.replace(/(\\<\\/h[0-9]>)\\n/g, '$1');\r\n  md = md.replace(/(\\<hr \\/>)\\n/g, '$1');\r\n  md = md.replace(/^\\n/, '');\r\n  md = md.replace(/^\\n/, '');\r\n  md = md.replace(/\\n$/, '');\r\n  md = md.replace(/\\n/g, '<br />');\r\n  md = md.replace(/\\t/g, ' ');\r\n  md = md.replace(/\\<\\/ol><br \\/>/g, '</ol>');\r\n  md = md.replace(/\\<\\/ul><br \\/>/g, '</ul>');\r\n\r\n  return md;\r\n};\r\n\r\n/** Array of RegExp rules for conversion\r\n*/\r\nmd2html.rules = [\r\n  // Headers\r\n  [/#?(.*)\\n={5}(.*)/g, \"<h1>$1</h1>\"],        // h1\r\n// [/#?(.*)\\n\\-{5}(.*)/g, \"<h2>$1</h2>\"],        // h2\r\n\r\n  [/\\n#{6}(.*)/g, \"\\<h6>$1</h6>\"],          // h5\r\n  [/\\n#{5}(.*)/g, \"\\n<h5>$1</h5>\"],          // h5\r\n  [/\\n#{4}(.*)/g, \"\\n<h4>$1</h4>\"],          // h4\r\n  [/\\n#{3}(.*)/g, \"\\n<h3>$1</h3>\"],          // h3\r\n  [/\\n#{2}(.*)/g, \"\\n<h2>$1</h2>\"],          // h2\r\n  [/\\n#{1}(.*)/g, \"\\n<h1>$1</h1>\"],          // h1\r\n\r\n  [/<h([1-6])>\\t/g, \"<h$1 class='center'>\"],      // Center header with tab\r\n\r\n  // Blocks\r\n  [/\\n\\&gt\\;(.*)/g, '<blockquote>$1</blockquote>'],  // blockquotes\r\n  [/\\<\\/blockquote\\>\\<blockquote\\>/g, '\\n'],      // fix\r\n  [/\\n-{5,}/g, \"\\n<hr />\"],              // hr\r\n\r\n  // Lists\r\n  [/\\n\\* (.*)/g, '\\n<ul><li>$1</li></ul>'],      // ul lists\r\n  [/\\n {1,}\\*\\ ([^\\n]*)/g, '<ul2><li>$1</li></ul2>'],  // ul ul lists\r\n  [/\\n\\t\\*\\ ([^\\n]*)/g, '<ul2><li>$1</li></ul2>'],  // ul ul lists\r\n  [/<\\/ul2><ul2>/g, ''],                // concat\r\n  [/<\\/ul><ul2>([^\\n]*)<\\/ul2>\\n/g, '<ul>$1</ul></ul>'],// indent\r\n  [/\\n\\<ul\\>/g, '<ul>'],                // fix\r\n  [/<\\/ul><ul>/g, ''],                // concat\r\n\r\n  // Ordered list\r\n  [/\\n[0-9]+\\.(.*)/g, '<ol><li>$1</li></ol>'],    // ol lists\r\n  [/\\<\\/ol\\>\\<ol\\>/g, ''],              // fix\r\n\r\n  // Automatic links\r\n  [/([^\\(])([ |\\n]https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*))( ?)/g, '$1<a href=\\'$2\\' target=\"_blank\">$2</a>'],\r\n  // Mailto\r\n  [/([^\\(])\\bmailto\\b\\:(\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b)/gi, '$1<a href=\\'mailto:$2\\'>$2</a>'],\r\n\r\n\r\n  /* Twitter */\r\n\r\n  // Twitter Share\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/twitter.com\\/share ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<a href=\"https://twitter.com/share\" data-text=\"$2\" data-hashtags=\"macarte\" data-related=\"IGNFrance\" class=\"twitter-share-button\" data-size=\"large\" data-show-count=\"true\">Tweet</a>'],\r\n\r\n  // User timeline\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/twitter.com\\/([^\\/)]*)\\/timeline ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<a class=\"twitter-timeline\" href=\"https://twitter.com/$3\" data-tweet-limit=\"$4\" data-width=\"$5\"><a href=\"https://twitter.com/$3?cards=false\"></a></blockquote>'],\r\n  // Twitter timeline\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/twitter.com\\/([^\\/)]*)\\/timelines\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<a class=\"twitter-timeline\" href=\"https://twitter.com/$3/timelines/$4\" data-tweet-limit=\"$5\" data-width=\"$6\"><a href=\"https://twitter.com/$3?cards=false\"></a></blockquote>'],\r\n  // Twitter grid\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/twitter.com\\/([^\\/)]*)\\/timegrid\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<a class=\"twitter-grid\" href=\"https://twitter.com/$3/timelines/$4\" data-limit=\"$5\"  data-width=\"$6\"><a href=\"https://twitter.com/$3?cards=false\"></a></blockquote>'],\r\n  // Tweet\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/twitter.com\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<blockquote class=\"twitter-tweet\" data-cards=\"$4hidden\" data-dnt=\"true\" data-width=\"$5\" width=\"$5\"><a href=\"https://twitter.com/$3?cards=false\"></a></blockquote>'],\r\n\r\n  // FaceBook like\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/www.facebook.com\\/like ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<iframe src=\"https://www.facebook.com/plugins/like.php?href=URL_PAGE_CARTE&width=136&layout=button_count&action=like&size=small&show_faces=false&share=true&height=20&appId\" width=\"136\" height=\"20\" class=\"facebook-share-button\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" allow=\"encrypted-media\"></iframe>'],\r\n\r\n  // Page FaceBook\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/www.facebook.com\\/([^\\/)]*)\\/posts\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<iframe src=\"https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2F$3%2Fposts%2F$4&width=$5&height=$6\" width=\"$5\" height=\"$6\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" allow=\"encrypted-media\"></iframe>'],\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/www.facebook.com\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<iframe src=\"https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2F$3&tabs=timeline&width=$4\" width=\"$4\" height=\"$5\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" allow=\"encrypted-media\"></iframe>'],\r\n\r\n  /* Media */\r\n\r\n  // INA.fr\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https:\\/\\/player.ina.fr\\/player\\/embed\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<iframe class=\"video\" width=\"300\" height=\"180\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\" scrolling=\"no\" style=\"overflow:hidden;width:$4px; height:$5px;\" src=\"https://player.ina.fr/player/embed/$3/wide/0\" allowfullscreen></iframe>'],\r\n  // INA/Jalon\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(InaEdu([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<iframe class=\"video\" width=\"300\" height=\"180\" style=\"width:$4px; height:$5px;\" src=\"https://fresques.ina.fr/jalons/export/player/InaEdu$3/360x270\" allowfullscreen></iframe>'],\r\n  // Youtube\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https?:\\/\\/youtu.be\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<iframe class=\"video\" width=\"300\" height=\"180\" style=\"width:$4px; height:$5px;\" src=\"https://www.youtube.com/embed/$3\" frameborder=\"0\" allowfullscreen></iframe>'],\r\n  // Dailymotion\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https?:\\/\\/dai.ly\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<iframe class=\"video\" frameborder=\"0\" width=\"300\" height=\"180\" style=\"width:$4px; height:$5px;\" src=\"https://www.dailymotion.com/embed/video/$3\" allowfullscreen></iframe>'],\r\n  // Vimeo\r\n  [ /\\!(\\[([^\\[|\\]]+)?\\])?\\(https?:\\/\\/vimeo.com\\/([^ |\\)]*) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<iframe class=\"video\" frameborder=\"0\" width=\"300\" height=\"180\" style=\"width:$4px; height:$5px;\" src=\"https://player.vimeo.com/video/$3\" allowfullscreen></iframe>'],\r\n\r\n  // Audio\r\n  [/\\!(\\[([^\\[|\\]]+)?\\])?\\((https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=\\(\\)]*)\\.mp3) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<audio controls style=\"width:$6px; height:$7px;\" title=\"$2\"><source src=\"$3\" type=\"audio/mpeg\">Your browser does not support the audio element.</audio>'],\r\n  // Video\r\n  [/\\!(\\[([^\\[|\\]]+)?\\])?\\((https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=\\(\\)]*)\\.mp4) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<video controls style=\"width:$6px; height:$7px;\" title=\"$2\"><source src=\"$3\" type=\"video/mp4\">Your browser does not support the video tag.</video>'],\r\n\r\n  // Internal images\r\n  [/\\!(\\[([^\\[|\\]]+)?\\])?\\((.*\\.(jpe?g|png|gif|svg)) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<img style=\"width:$5px; height:$6px;\" src=\"$3\" title=\"$2\" />'],\r\n\r\n  // Images\r\n  [/!(\\[([^[|\\]]+)?\\])?\\((https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=()]*)) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<img style=\"width:$6px; height:$7px;\" src=\"$3\" title=\"$2\" />'],\r\n  // Local images\r\n  [/!(\\[([^[|\\]]+)?\\])?\\((file:\\/\\/\\/([-a-zA-Z0-9@:%_+.~#?&//=()]*)) ?(\\d+)?x?(\\d+)?\\)/g,\r\n    '<img style=\"width:$5px; height:$6px;\" src=\"$3\" title=\"$2\" />'],\r\n\r\n  // links\r\n  [/\\[([^[]+)?\\]\\((https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*))( ?)([^)]*)\\)/g,\r\n    '<a href=\\'$2\\' title=\"$6\" target=\"_blank\">$1</a>'],\r\n  [/\\((https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*))( ?)([^)]*)\\)/g,\r\n    '<a href=\\'$1\\' title=\"$5\" target=\"_blank\">$1</a>'],\r\n  // Mailto\r\n  [/\\[([^[]+)?\\]\\(\\bmailto\\b:(\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b)\\)/gi, '<a href=\\'mailto:$2\\'>$1</a>'],\r\n  [/\\(\\bmailto\\b:(\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b)\\)/gi, '<a href=\\'mailto:$1\\'>$1</a>'],\r\n  // tel\r\n  [/\\[([^[]+)?\\]\\(tel:([0-9+-]+)\\)/g, '<a href=\\'tel:$2\\'>$1</a>'],\r\n  [/\\(tel:([0-9+-]+)\\)/g, '<a href=\\'tel:$1\\'>$1</a>'],\r\n\r\n  // Code\r\n  [/`(.*?)`/g, '<code>$1</code>'],              // inline code\r\n  [/\\n {4,}(.*)/g, '<pre>$1</pre>'],            // Code\r\n  [/\\n\\t(.*)/g, '<pre>$1</pre>'],               // Code\r\n  [/<\\/pre><pre>/g, '<br/>'],                   // fix\r\n  [/<\\/pre>\\n/g, '</pre>'],                     // fix\r\n\r\n  // format\r\n  [/(\\\\\\*)/g, '&#42;'],                         // escape *\r\n  [/(\\*\\*)([^]*?)\\1/g, '<strong>$2</strong>'],  // bold\r\n  [/(\\*)([^]*?)\\1/g, '<em>$2</em>'],            // emphasis\r\n  [/<strong><\\/strong>/g, '****'],              // fix bold\r\n  [/<em><\\/em>/g, '**'],                        // fix em\r\n  [/(__)(.*?)\\1/g, '<u>$2</u>'],                // underline\r\n  [/(~~)(.*?)\\1/g, '<del>$2</del>'],            // del\r\n\r\n  // alignement https://github.com/jgm/pandoc/issues/719\r\n  [/\\n\\|<>([^\\n]*)/g, \"\\n<pc>$1</pc>\"],       // center |<>\r\n  [/\\n\\|\\t([^\\n]*)/g, \"\\n<pc>$1</pc>\"],       // center |[tab]\r\n  [/\\n\\|<([^\\n]*)/g, \"\\n<pl>$1</pl>\"],        // left |<\r\n  [/\\n\\|>([^\\n]*)/g, \"\\n<pr>$1</pr>\"],        // rigth |>\r\n  [/<\\/pc>\\n<pc>/g, \"<br/>\"],\r\n  [/<\\/pl>\\n<pl>/g, \"<br/>\"],\r\n  [/<\\/pr>\\n<pr>/g, \"<br/>\"],\r\n  [/<pc>/g, \"<div class='center'>\"],          // fix\r\n  [/<pl>/g, \"<div class='left'>\"],            // fix\r\n  [/<pr>/g, \"<div class='right'>\"],           // fix\r\n  [/<\\/pc>|<\\/pl>|<\\/pr>/g, \"</div>\"],        // fix\r\n\r\n  //\r\n  [/\\(c\\)/g, \"&copy;\"],                 // (c)\r\n  [/\\(r\\)/g, \"&reg;\"],                  // (R)\r\n  [/\\(TM\\)/g, \"&trade;\"]                // (TM)\r\n\r\n];\r\n\r\nexport default md2html\r\n","import jSlide from './jSlide'\r\nimport md2html from '../md/md2html'\r\n\r\n/**\r\n * \r\n */\r\njSlide.drawSlide = function (content, page, slideshow) {\r\n  var slide = this.slide[page];\r\n  var pos = slide.search(']');\r\n  var head = slide.substr(0,pos).trim().split('\\n');\r\n  var md = slide.substr(pos+1);\r\n  var data = {\r\n    TITLE: this.get('title'),\r\n    PAGE: page+1,\r\n    LENGTH: this.slide.length\r\n  };\r\n\r\n  // Get slide parameters\r\n  if (!/:/.test(head[0])) head[0] = 'className:'+head[0];\r\n  var param = { className:'' };\r\n  head.forEach(function(h) {\r\n    var p = h.split(':');\r\n    param[p.shift().trim()] = p.join(':').trim();\r\n  });\r\n\r\n  var element = content;\r\n  content.className = (slideshow ? 'slideshow ' + (param.transition||'') : '').trim();\r\n\r\n  var element = document.createElement('DIV');\r\n  element.className = 'content';\r\n\r\n  // Add Slide\r\n  var div = document.createElement('DIV');\r\n  div.className = ('slide '+param.className).trim();\r\n  div.innerHTML = '<div class=\"md\">'+md2html(md, data)+'</div>';\r\n  // Create steps\r\n  div.querySelectorAll('.step').forEach(function(e){\r\n    var prop = e.getAttribute('data-anim');\r\n    if (prop) {\r\n      prop = prop.split(',');\r\n      if (prop[0] && !/:/.test(prop[0])) {\r\n        e.className = 'step '+prop.shift().trim();\r\n      }\r\n      prop.forEach(function(p) {\r\n        p = p.split(':');\r\n        p[0] = p[0].trim();\r\n        switch (p[0]) {\r\n          case 'step': \r\n          case 'delay': {\r\n            e.setAttribute('data-'+p[0], p[1].trim());\r\n            break;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  // element.innerHTML = '';\r\n  // Switch slides\r\n  var old = content.querySelectorAll('.content');\r\n  old.forEach(function(node) {\r\n    node.className = node.className+' hidden';\r\n  });\r\n  setTimeout(function() {\r\n    old.forEach(function(node) {\r\n      node.remove();\r\n    });\r\n  }, 500);\r\n  setTimeout(function() {\r\n    element.className = element.className + ' visible';\r\n  },100);\r\n\r\n  content.appendChild(element);\r\n  element.appendChild(div);\r\n\r\n  this.updateSize();\r\n  if (param.bgImage) {\r\n    var img, d = (/\\bfullscreen\\b/.test(div.className)) ? element : div;\r\n    if (/^linear-gradient|^radial-gradient/.test(param.bgImage)) {\r\n      img = document.createElement('DIV');\r\n      img.className = 'bgImage';\r\n      img.style.backgroundImage = param.bgImage;\r\n    } else {\r\n      img = document.createElement('IMG');\r\n      img.className = 'bgImage';\r\n      img.src = param.bgImage;\r\n      var setSize = function() {\r\n        var r = d.getBoundingClientRect();\r\n        if (r.width/img.width > r.height/img.height) img.style.width = '100%';\r\n        else img.style.height = '100%';\r\n      };\r\n      if (img.width) setSize();\r\n      else img.onload = setSize;\r\n    }\r\n    d.insertBefore(img, d.lastChild);\r\n  }\r\n  if (param.color) {\r\n    div.className += ' resetColor';\r\n    div.style.color = param.color;\r\n  }\r\n  if (param.fontSize) {\r\n    div.querySelector('.md').style.fontSize = param.fontSize+'px';\r\n  }\r\n  this.setSlideFont(div, param.fontFamily);\r\n\r\n  if (window.twttr) twttr.widgets.load(div);\r\n\r\n  // Set Footer\r\n  var footer = document.createElement('DIV');\r\n  footer.className = 'footer';\r\n  var c = this.get('footer').split('|');\r\n  footer.innerHTML = '<div class=\"left\">'+md2html(c[0]||'', data)+'</div>'\r\n  +'<div class=\"middle\">'+md2html(c[1]||'', data)+'</div>'\r\n  +'<div class=\"right\">'+md2html(c[2]||'', data)+'</div>';\r\n  div.appendChild(footer);\r\n};\r\n\r\n/** Show a slide\r\n * @param {number} n position, default current slide\r\n */\r\njSlide.show = function (n) {\r\n  if (!this.slide || !this.slide.length) return;\r\n  var element = document.getElementById('slide');\r\n  // current slide\r\n  if (n!==undefined) this.current = n;\r\n  this.current = Math.max(0, Math.min(this.current, this.slide.length-1));\r\n\r\n  // Set location\r\n  if (history.replaceState) history.replaceState(null, null, '#'+(this.current+1));\r\n  else location.hash = '#'+(this.current+1);\r\n\r\n  // Draw slide\r\n  this.drawSlide(element, this.current, this.slideshow);\r\n\r\n  // Select current slide in the panel\r\n  var li = document.querySelectorAll('#panel > li');\r\n  li.forEach(function (l, i) {\r\n    if (i===jSlide.current) {\r\n      l.className='selected';\r\n      var r = l.getBoundingClientRect();\r\n      var ul = document.getElementById('panel');\r\n      ul.scrollTop = l.offsetTop + r.height/2 - ul.getBoundingClientRect().height/2;\r\n    } else {\r\n      l.className = '';\r\n    }\r\n  });\r\n\r\n  // Insert edition\r\n  this.editor.setText('[===='+this.slide[this.current]);\r\n\r\n  // Set progress bar\r\n  this.progressBar.style.width = (100 * this.current / (this.slide.length-1)||0)+'%';\r\n\r\n  if (this.presentation) {\r\n    this.drawSlide(this.presentation, this.current, this.slideshow);\r\n    var p = this.presentation.ownerDocument.getElementById('progress').querySelector('div');\r\n    p.style.width = (100 * this.current / (this.slide.length-1)||0)+'%';\r\n  }\r\n};\r\n\r\n/** Show next step\r\n * @param {Element} elt DOM element to searchin\r\n */\r\njSlide.nextStep = function (elt) {\r\n  var step = [];\r\n  // Get all steps (visible)\r\n  elt.querySelectorAll('.step').forEach(function(e){\r\n    if (!/visible/.test(e.className)) step.push(e);\r\n  });\r\n  if (step.length) {\r\n    // Sort steps by count\r\n    step = step.sort(function(a,b) {\r\n      return parseInt(a.getAttribute('data-step')||0) - parseInt(b.getAttribute('data-step')||0);\r\n    });\r\n    step[0].className = step[0].className+' visible';\r\n    // Show delay steps\r\n    function delayShow(s) {\r\n      setTimeout(function(){\r\n        s.className = s.className+' visible';\r\n      }, parseInt(100*s.getAttribute('data-delay')));\r\n    }\r\n    for (var i=1; i<step.length; i++) {\r\n      if (step[i].getAttribute('data-delay')) {\r\n        delayShow(step[i]);\r\n      } else break;\r\n    };\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/** Go to previous Step\r\n * @param {Element} elt DOM element to searchin\r\n */\r\njSlide.prevStep = function (elt) {\r\n  // Get all steps (visible)\r\n  var step = [];\r\n  elt.querySelectorAll('.step').forEach(function(e){\r\n    if (/visible/.test(e.className)) step.push(e);\r\n  });\r\n  if (step.length) {\r\n    // Show delay steps\r\n    step = step.sort(function(a,b) {\r\n      return parseInt(a.getAttribute('data-step')||0) - parseInt(b.getAttribute('data-step')||0);\r\n    });\r\n    // Remove\r\n    step[step.length-1].className = step[step.length-1].className.replace('visible','').trim();\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/** Show next slide\r\n */\r\njSlide.next = function () {\r\n  // Get next step\r\n  if (this.slideshow) {\r\n    if (this.nextStep(document.getElementById('slide'))) {\r\n      if (this.presentation) this.nextStep(this.presentation);\r\n      return;\r\n    }\r\n  }\r\n  if (this.current < this.slide.length-1) this.show(++this.current);\r\n};\r\n\r\n/** Show previous slide\r\n */\r\njSlide.prev = function () {\r\n  if (this.slideshow) {\r\n    if (this.prevStep(document.getElementById('slide'))) {\r\n      if (this.presentation) this.prevStep(this.presentation);\r\n      return;\r\n    }\r\n  }\r\n  if (this.current) this.show(--this.current);\r\n};\r\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  xhr.send()\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click(node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile)\n  : 'download' in HTMLAnchorElement.prototype\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari)) && typeof FileReader === 'object') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","import jSlide from './jSlide'\r\nimport { saveAs } from 'file-saver';\r\n\r\n/**\r\n * Read from a file\r\n * @param {File} file\r\n */\r\njSlide.read = function (file) {\r\n  if (!file) return;\r\n  if (/md$/.test(file.name)) {\r\n    jSlide.filename = file.name;\r\n    var reader = new FileReader();\r\n    reader.onload = function() { \r\n      var res = reader.result;\r\n      jSlide.open(res);\r\n    };\r\n    reader.readAsText(file);\r\n  }\r\n};\r\n\r\n/**\r\n * Open md string\r\n * @param {string} slide md string\r\n */\r\njSlide.open = function (slide) {\r\n  this.slide = slide;\r\n  this.slide = this.slide.replace(/(\\r\\n)/g, '\\n');\r\n  this.slide = this.slide.split(/\\[====/g);\r\n  // Header\r\n  var head = this.slide.shift().split('\\n');\r\n  var properties = {};\r\n  head.forEach(function(p) {\r\n    p = p.split(':');\r\n    properties[p.shift().trim()] = p.join(':').trim();\r\n  });\r\n  this.set(properties);\r\n  // \r\n  this.showPanel();\r\n  // title\r\n  this.current = 0;\r\n  this.show();\r\n};\r\n\r\n/** Save md file\r\n */\r\njSlide.save = function () {\r\n  var slide = '';\r\n  for (var i in this.getProperties()) {\r\n    slide += i + ': ' + this.get(i) + '\\n';\r\n  }\r\n  slide +=  '==== ' + this.slide.join('[==== ');\r\n  var blob = new Blob([slide], {type: 'text/plain;charset=utf-8'});\r\n  saveAs(blob, this.filename || 'slide.md');\r\n};\r\n\r\n/* Drag n drop a new md\r\n */\r\njSlide.ondrop = function (ev) {\r\n  console.log('drop')\r\n  // Prevent default behavior (Prevent file from being opened)\r\n  ev.preventDefault();\r\n\r\n  // Load file\r\n  this.read(ev.dataTransfer.files[0]);\r\n};\r\n\r\n/* Load file using lcation hash info\r\n */\r\njSlide.onload = function (ev) {\r\n  // Look for a file to load\r\n  var doc = document.location.search.replace(/^\\?/,'');\r\n  // Load file\r\n  if (doc) {\r\n    doc = './presentations/'+doc+'.md';\r\n    var c = parseInt(document.location.hash.replace(/^#/,'')) || 1;\r\n    if (doc) {\r\n      var ajax = new XMLHttpRequest();\r\n      ajax.open('GET', doc, true);\r\n      this.filename = doc.split('/').pop();\r\n\r\n      // Load complete\r\n      var self = this;\r\n      ajax.onload = function(e) {\r\n        self.open(this.response)\r\n        self.show(c-1);\r\n      };\r\n\r\n      // Oops\r\n      ajax.onerror = function() {\r\n      };\r\n\r\n      // GO!\r\n      ajax.send();\r\n    }\r\n  } else {\r\n    // Create new one\r\n    this.slide = [' title ]\\n# New presentation\\n## Subtitle'];\r\n    this.current = 0;\r\n    this.showPanel();\r\n    this.show(this.current+1);\r\n  }\r\n};\r\n","import jSlide from  './jSlide'\r\n\r\n/** Update slides size\r\n */\r\nfunction resize(s){\r\n  var height = s.parentNode.clientHeight;\r\n  var width = s.parentNode.clientWidth;\r\n  s.style.width = jSlide.get('width')+'px';\r\n  s.style.height = jSlide.get('height')+'px';\r\n  s.style.fontSize = jSlide.get('fontSize')+'px';\r\n  jSlide.setSlideFont (s, jSlide.get('fontFamily'));\r\n  var sc = Math.min (width / jSlide.get('width'), height / jSlide.get('height'));\r\n  s.style.webkitTransform = s.style.transform = 'translate(-50%, -50%) scale('+sc+')';\r\n};\r\n\r\njSlide.updateSize = function() {\r\n  document.body.querySelectorAll('.slide').forEach(resize);\r\n  if (jSlide.presentation) {\r\n    jSlide.presentation.querySelectorAll('.slide').forEach(resize);\r\n  }\r\n};\r\n\r\n/** Handle keydown avent\r\n */\r\njSlide.onkeydown = function(e) {\r\n  switch (e.keyCode) {\r\n    case 39:\r\n    case 40:\r\n    case 34: {\r\n      jSlide.next();\r\n      e.preventDefault();\r\n      break;\r\n    }\r\n    case 37:\r\n    case 38:\r\n    case 33: {\r\n      jSlide.prev();\r\n      e.preventDefault();\r\n      break;\r\n    }\r\n    // Ctrl + O\r\n    case 79: {\r\n      if (e.ctrlKey) {\r\n        e.preventDefault();\r\n      }\r\n      break;\r\n    }\r\n    // Fullscreen\r\n    case 116: {\r\n      this.openPresentation();\r\n      e.preventDefault();\r\n      break;\r\n    }\r\n    // Ctrl + S\r\n    case 83: {\r\n      if (e.ctrlKey) {\r\n        this.save();\r\n        e.preventDefault();\r\n      }\r\n      break;\r\n    }\r\n    default: break;\r\n  }\r\n};\r\n\r\n\r\n// Resize slide on resize \r\nwindow.addEventListener('resize', (e) => {\r\n  jSlide.updateSize(e);\r\n});\r\n// Handle key down \r\ndocument.addEventListener('keydown', (e) => {\r\n  jSlide.onkeydown(e);\r\n}, false);\r\n\r\n// Handle drag'n'drop\r\ndocument.body.addEventListener('drop', (e) => {\r\n  jSlide.ondrop(e);\r\n});\r\ndocument.body.addEventListener('dragover', (e) => { \r\n  e.preventDefault(); \r\n});\r\n\r\n// Load file onload\r\nwindow.addEventListener('load', (e) => {\r\n  jSlide.onload(e);\r\n});\r\n\r\n// Longtouch / slide on the slides\r\nvar touchstart = [0,0];\r\nvar touchend = [0,0];\r\nvar timer;\r\n\r\n/** Longtouch on the slide > openPresentationDlog\r\n */\r\ndocument.getElementById('slide').addEventListener(\"touchstart\", (e) => {\r\n  touchstart = touchend = [e.touches[0].clientX, e.touches[0].clientY, new Date()];\r\n  if (timer) clearTimeout(timer); \r\n  timer = setTimeout(function() {\r\n    if (Math.abs(touchstart[0] - touchend[0]) < 5 && Math.abs(touchstart[1] - touchend[1]) < 5) {\r\n      e.preventDefault();\r\n      jSlide.openPresentationDlog();\r\n    }\r\n  }, 800); \r\n}, false);\r\n\r\n/** Swipe left/ritgh\r\n */\r\ndocument.getElementById('slide').addEventListener(\"touchmove\", (e) => {\r\n  touchend = [e.touches[0].clientX, e.touches[0].clientY, new Date()];\r\n  if (touchend[2] - touchstart[2] < 100) {\r\n    if (touchstart[0] - touchend[0] > 100) {\r\n      touchstart[2] = 0;\r\n      if (timer) clearTimeout(timer); \r\n      jSlide.next()\r\n      console.log('next')\r\n    }\r\n    if (touchstart[0] - touchend[0] < -100) {\r\n      touchstart[2] = 0;\r\n      if (timer) clearTimeout(timer); \r\n      jSlide.prev();\r\n      console.log('prev')\r\n    }\r\n  }\r\n}, false);\r\n\r\n/** Prevent longtouch */\r\ndocument.getElementById('slide').addEventListener(\"touchend\", (e) => {\r\n  if (timer) clearTimeout(timer); \r\n  e.preventDefault();\r\n}, false);\r\n","import jSlide from './jSlide'\r\n\r\n// Create panel\r\nconst panel = document.createElement('DIV');\r\npanel.id = 'panel';\r\ndocument.body.appendChild(panel);\r\n\r\n/** Show slides in left panel\r\n */\r\njSlide.showPanel = function (slide) {\r\n  if (slide) {\r\n    var li = document.querySelectorAll('#panel > li > div');\r\n    jSlide.drawSlide(li[slide],slide);\r\n  } else {\r\n    panel.innerHTML = '';\r\n    jSlide.slide.forEach(function(s, i) {\r\n      var li = document.createElement('LI');\r\n      var element = document.createElement('DIV');\r\n      panel.appendChild(li);\r\n      li.appendChild(element);\r\n      jSlide.drawSlide(element,i);\r\n      li.addEventListener('click', function(){\r\n        jSlide.show(i);\r\n      });\r\n    });\r\n  }\r\n};\r\n","import jSlide from './jSlide'\r\n\r\n// Create editor\r\nconst editor = jSlide.editor = {\r\n  jSlide: jSlide\r\n};\r\n\r\nconst editorDiv = document.createElement('DIV');\r\neditorDiv.id = 'editor';\r\ndocument.body.appendChild(editorDiv);\r\n\r\neditor.element = document.createElement('TEXTAREA');\r\neditorDiv.appendChild(editor.element);\r\n\r\n/**\r\n * Get the editor text\r\n * @return {string}\r\n */\r\neditor.getText = function() {\r\n  return this.element.value;\r\n};\r\n\r\n/** Set editor text\r\n * @param {string} md\r\n */\r\neditor.setText = function(md) {\r\n  this.element.value = md;\r\n};\r\n\r\n/** Insert char at current position\r\n * @param {char} c\r\n */\r\neditor.insertChar = function(c) {\r\n  if (this.element.selectionStart || this.element.selectionStart == '0') {\r\n    var startPos = this.element.selectionStart;\r\n    var endPos = this.element.selectionEnd;\r\n    this.element.value = this.element.value.substring(0, startPos)\r\n      + c\r\n      + this.element.value.substring(endPos, this.element.value.length);\r\n      this.element.selectionEnd = this.element.selectionStart = startPos+1;\r\n  } else {\r\n    this.element.value += c;\r\n  }\r\n};\r\n\r\n/** Something as changed\r\n */\r\nfunction onchange(panel) {\r\n  jSlide.slide[jSlide.current] = editor.getText().replace(/^\\[====/,'');\r\n  jSlide.show();\r\n  if (panel) jSlide.showPanel(jSlide.current);\r\n};\r\n\r\neditor.element.addEventListener('change', (e) => { onchange(true); });\r\n\r\n/** Handle keydown event\r\n * @param {Event} e\r\n */\r\neditor.element.addEventListener('keydown', (e) => {\r\n  if (e.keyCode === 116) return;\r\n  if (!e.ctrlKey || e.keyCode < 60) {\r\n    e.stopPropagation();\r\n    switch (e.keyCode) {\r\n      case 9: { \r\n        editor.insertChar('\\t');\r\n        e.preventDefault()\r\n        break;\r\n      }\r\n      case 13:\r\n      editor.insertChar('\\n');\r\n      case 27: {\r\n        onchange(false);\r\n        e.preventDefault();\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n  }\r\n});\r\n","import jSlide from './jSlide'\r\n\r\njSlide.openPresentation = function() {\r\n  var w = window.open ('', 'jSlidePresentation', 'channelmode=0, directories=0, location=0, menubar=0, status=0, titlebar=0, toolbar=0, copyhistory=no');\r\n  \r\n  // Copy head section\r\n  w.document.head.innerHTML = document.head.innerHTML;\r\n  // Restore link path\r\n  var links = w.document.querySelectorAll('link');\r\n  document.querySelectorAll('link').forEach((l, i) => {\r\n    if (l.href) {\r\n      links[i].href = l.href;\r\n    }\r\n  });\r\n\r\n  // Presentation div\r\n  if (!jSlide.presentation) {\r\n    const slideDiv = w.document.createElement('DIV');\r\n    slideDiv.id = 'slide';\r\n    w.document.body.appendChild(slideDiv);\r\n    jSlide.presentation = slideDiv;\r\n\r\n    // Add progress bar\r\n    const progress = document.createElement('DIV');\r\n    progress.id = 'progress';\r\n    w.document.body.appendChild(progress);\r\n    progress.appendChild(document.createElement('DIV'));\r\n    w.document.body.className = 'presentation';\r\n    \r\n    w.addEventListener('resize', (e) => { jSlide.updateSize(e); });\r\n    /* Next slide\r\n    w.document.addEventListener('click', function() {\r\n      jSlide.next();\r\n    });\r\n    */\r\n    // Longtouch / slide\r\n    w.document.getElementById('slide').addEventListener(\"touchstart\", (e) => { jSlide.ontouchstart(e); }, false);\r\n    w.document.getElementById('slide').addEventListener(\"touchmove\", (e) => { jSlide.ontouchmove(e); }, false);\r\n    w.document.getElementById('slide').addEventListener(\"touchend\", (e) => { jSlide.ontouchend(e); }, false);\r\n    // Fullscreen\r\n    w.document.addEventListener('keydown', (e) => {\r\n      // F5 = fullscreen\r\n      if (e.keyCode===116 && w.document.documentElement.requestFullscreen) {\r\n        console.log('fullscreen')\r\n        if (w.fullScreen) {\r\n          w.document.exitFullscreen();\r\n          w.fullScreen = false;\r\n          jSlide.updateSize();\r\n        }\r\n        else {\r\n          w.document.documentElement.requestFullscreen();\r\n          w.fullScreen = true;\r\n          jSlide.updateSize();\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      } else {\r\n        jSlide.onkeydown(e);\r\n      }\r\n    });\r\n\r\n    // Remove presentation on unload\r\n    w.onunload = function() {\r\n      jSlide.presentation = null;\r\n    };\r\n  }\r\n\r\n  jSlide.show();\r\n  setTimeout(() => { jSlide.updateSize(); });\r\n};\r\n\r\n/** Show presentation\r\n */\r\njSlide.showPresentation = function() {\r\n  jSlide.slideshow = !jSlide.slideshow;\r\n  jSlide.step = 0;\r\n  jSlide.show();\r\n};\r\n\r\n/** Open in a new window */\r\njSlide.openPresentationDlog = function() {\r\n  this.dialog.show({\r\n    content: _T('show_presentation'),\r\n    buttons: {\r\n      cancel: 1\r\n    }\r\n  });\r\n}\r\n\r\n\r\n","import jSlide from './jSlide'\r\nimport './jSlide.font'\r\nimport './jSlide.draw'\r\nimport './jSlide.io'\r\nimport './jSlide.event'\r\nimport './jSlide.panel'\r\nimport './jSlide.editor'\r\nimport './jSlide.presentation'\r\n\r\nexport default jSlide","import jSlide from '../jslide/jSlide'\r\n\r\nconst bar = {}\r\n\r\n// Create the bar\r\nconst header = document.createElement('DIV');\r\nheader.id = 'header';\r\ndocument.body.appendChild(header);\r\n\r\n// Add button to the bar\r\nfunction addButton(className, click) {\r\n  var b = document.createElement('BUTTON');\r\n  // Save\r\n  b.className = className;\r\n  b.addEventListener('click', click);\r\n  header.appendChild(b);\r\n  return b;  \r\n}\r\n\r\n//\r\naddButton('addSlide', () => {\r\n  jSlide.slide.splice(jSlide.current+1,0,']');\r\n  jSlide.showPanel();\r\n  jSlide.next();\r\n});\r\naddButton('open');\r\naddButton('save', () => { jSlide.save(); });\r\naddButton('present', () => { jSlide.openPresentation(); });\r\naddButton('slideshow', () => { jSlide.showPresentation(); });\r\n\r\nexport default bar\r\n","import './src/style/load'\r\n\r\nimport jSlide from './src/jslide/jSlide.module'\r\nimport './src/bar/bar'\r\n\r\n// Debug\r\nwindow.jSlide = jSlide;"]}